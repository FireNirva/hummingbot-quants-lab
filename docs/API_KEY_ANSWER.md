# ğŸ¯ æ˜ç¡®ç­”æ¡ˆï¼šGate.io è®¢å•ç°¿é‡‡é›†æ˜¯å¦éœ€è¦ API Keyï¼Ÿ

---

## âœ… **ç­”æ¡ˆï¼šä¸éœ€è¦ API Keyï¼**

---

## ğŸ“š å®˜æ–¹æ–‡æ¡£è¯æ˜

### **Gate.io å®˜æ–¹ API æ–‡æ¡£**

æ¥æºï¼šhttps://www.gate.io/docs/developers/apiv4/en/

#### **å…¬å…±ç«¯ç‚¹ï¼ˆPublic Endpointsï¼‰**

```
/spot/order_book - è·å–è®¢å•ç°¿
/spot/tickers - è·å–è¡Œæƒ…
/spot/candlesticks - è·å– K çº¿
/spot/trades - è·å–æˆäº¤è®°å½•
```

**ç‰¹ç‚¹**:
- âœ… æ— éœ€è®¤è¯
- âœ… æ— éœ€ API Key
- âœ… ä»»ä½•äººéƒ½å¯ä»¥è®¿é—®

#### **ç§æœ‰ç«¯ç‚¹ï¼ˆPrivate Endpointsï¼‰**

```
/spot/accounts - æŸ¥è¯¢è´¦æˆ·ä½™é¢
/spot/orders - ä¸‹å•/æŸ¥è¯¢è®¢å•
/spot/open_orders - æŸ¥è¯¢å½“å‰å§”æ‰˜
```

**ç‰¹ç‚¹**:
- âŒ éœ€è¦ API Key
- âŒ éœ€è¦ç­¾åè®¤è¯
- âŒ åªèƒ½è®¿é—®è‡ªå·±çš„è´¦æˆ·

---

## ğŸ” ä½ çš„ä»£ç éªŒè¯

### **å½“å‰å®ç°**

```python
# app/tasks/data_collection/orderbook_snapshot_task.py

async def _fetch_gateio_orderbook(self, formatted_pair: str):
    url = "https://api.gateio.ws/api/v4/spot/order_book"
    params = {
        "currency_pair": formatted_pair,
        "limit": self.depth_limit,
        "with_id": "true"
    }
    
    # âœ… æ— éœ€ä»»ä½•è®¤è¯å¤´
    # âœ… æ— éœ€ API Key
    # âœ… æ— éœ€ç­¾å
    async with aiohttp.ClientSession() as session:
        async with session.get(url, params=params) as response:
            return await response.json()
```

**å…³é”®ç‚¹**:
1. âœ… ä½¿ç”¨å…¬å…±ç«¯ç‚¹ `/spot/order_book`
2. âœ… æ— éœ€æ·»åŠ  `KEY` header
3. âœ… æ— éœ€æ·»åŠ  `SIGN` header
4. âœ… æ— éœ€æ·»åŠ  `Timestamp` header
5. âœ… ç›´æ¥å‘é€ GET è¯·æ±‚å³å¯

---

## ğŸ“Š é€Ÿç‡é™åˆ¶å¯¹æ¯”

| API ç±»å‹ | éœ€è¦ Key | è®¢å•ç°¿é™åˆ¶ | å¹¶å‘é™åˆ¶ |
|---------|---------|-----------|---------|
| **å…¬å…± API** | âŒ ä¸éœ€è¦ | 100 æ¬¡/10ç§’ | 10 ä¸ªè¿æ¥ |
| **ç§æœ‰ API** | âœ… éœ€è¦ | 300 æ¬¡/10ç§’ | 10 ä¸ªè¿æ¥ |

### **ä½ çš„åœºæ™¯åˆ†æ**

```
é…ç½®ï¼š24 ä¸ªäº¤æ˜“å¯¹ï¼Œæ¯ 5 ç§’é‡‡é›†ä¸€æ¬¡

è¯·æ±‚é‡ï¼š
- æ¯ 5 ç§’ = 24 æ¬¡
- æ¢ç®—åˆ° 10 ç§’ = 48 æ¬¡/10ç§’

å¯¹æ¯”é™åˆ¶ï¼š
- å…¬å…± API é™åˆ¶ï¼š100 æ¬¡/10ç§’
- ä½ çš„è¯·æ±‚é‡ï¼š48 æ¬¡/10ç§’
- ä½¿ç”¨ç‡ï¼š48% âœ… éå¸¸å®‰å…¨
```

**ç»“è®º**: å…¬å…± API çš„é™åˆ¶**å®Œå…¨å¤Ÿç”¨**ï¼

---

## ğŸ¯ æœ€ç»ˆç¡®è®¤

### **ä½ éœ€è¦åšçš„**

```yaml
# âŒ ä¸éœ€è¦é…ç½®è¿™äº›
api_key: "xxxx"         # ä¸éœ€è¦
api_secret: "xxxx"      # ä¸éœ€è¦
passphrase: "xxxx"      # ä¸éœ€è¦

# âœ… åªéœ€è¦è¿™äº›
connector_name: "gate_io"
trading_pairs:
  - "IRON-USDT"
  - "VIRTUAL-USDT"
  ...
```

### **ä½ ä¸éœ€è¦åšçš„**

- âŒ æ³¨å†Œ Gate.io è´¦å·ï¼ˆè™½ç„¶æœ‰è´¦å·æ›´å¥½ï¼‰
- âŒ åˆ›å»º API Key
- âŒ é…ç½® API Secret
- âŒ æ·»åŠ è®¤è¯å¤´
- âŒ è®¡ç®—ç­¾å

---

## ğŸ’¡ ä¸ºä»€ä¹ˆè®¢å•ç°¿ä¸éœ€è¦ API Keyï¼Ÿ

### **åŸå› **

1. **å…¬å¼€æ•°æ®**
   - è®¢å•ç°¿æ˜¯å¸‚åœºå…¬å¼€ä¿¡æ¯
   - ä»»ä½•äººéƒ½å¯ä»¥åœ¨äº¤æ˜“æ‰€ç½‘ç«™ä¸Šçœ‹åˆ°
   - ä¸æ¶‰åŠç”¨æˆ·éšç§

2. **è®¾è®¡ç†å¿µ**
   - é¼“åŠ±æ•°æ®é€æ˜åº¦
   - æ–¹ä¾¿ç¬¬ä¸‰æ–¹å¼€å‘è€…
   - ä¿ƒè¿›å¸‚åœºæµåŠ¨æ€§

3. **ç›‘ç®¡è¦æ±‚**
   - äº¤æ˜“æ‰€å¿…é¡»æä¾›å…¬å¼€å¸‚åœºæ•°æ®
   - ç¡®ä¿å¸‚åœºå…¬å¹³æ€§

---

## âš ï¸ ä½•æ—¶éœ€è¦ API Keyï¼Ÿ

### **éœ€è¦ API Key çš„åœºæ™¯**

1. **äº¤æ˜“æ“ä½œ**
   ```python
   # ä¸‹å• - éœ€è¦ API Key
   POST /spot/orders
   ```

2. **è´¦æˆ·æŸ¥è¯¢**
   ```python
   # æŸ¥è¯¢ä½™é¢ - éœ€è¦ API Key
   GET /spot/accounts
   ```

3. **è®¢å•ç®¡ç†**
   ```python
   # æ’¤å• - éœ€è¦ API Key
   DELETE /spot/orders/{order_id}
   ```

### **ä¸éœ€è¦ API Key çš„åœºæ™¯** âœ…

1. **å¸‚åœºæ•°æ®**ï¼ˆä½ çš„åœºæ™¯ï¼‰
   ```python
   # è®¢å•ç°¿ - ä¸éœ€è¦ API Key
   GET /spot/order_book
   
   # K çº¿ - ä¸éœ€è¦ API Key
   GET /spot/candlesticks
   
   # æˆäº¤è®°å½• - ä¸éœ€è¦ API Key
   GET /spot/trades
   ```

---

## ğŸš€ å¿«é€ŸéªŒè¯

### **å‘½ä»¤è¡Œæµ‹è¯•ï¼ˆæ— éœ€ API Keyï¼‰**

```bash
# ç›´æ¥ç”¨ curl æµ‹è¯•
curl "https://api.gateio.ws/api/v4/spot/order_book?currency_pair=BTC_USDT&limit=5&with_id=true"
```

**é¢„æœŸè¿”å›**:
```json
{
  "id": 548631456,
  "current": 1666051200,
  "update": 1666051199,
  "asks": [["19549.74", "0.5"], ...],
  "bids": [["19549.73", "0.342"], ...]
}
```

**å¦‚æœæ”¶åˆ°è¿™æ ·çš„è¿”å›ï¼Œè¯´æ˜**:
- âœ… å…¬å…± API å®Œå…¨å¯ç”¨
- âœ… æ— éœ€ API Key
- âœ… ä½ çš„ä»£ç å®ç°æ­£ç¡®

---

## ğŸ“ æ£€æŸ¥æ¸…å•

éƒ¨ç½²å‰ç¡®è®¤:
- [ ] é…ç½®æ–‡ä»¶ä¸­**æ— éœ€**æ·»åŠ  `api_key`
- [ ] é…ç½®æ–‡ä»¶ä¸­**æ— éœ€**æ·»åŠ  `api_secret`
- [ ] ä»£ç ä¸­**æ— éœ€**æ·»åŠ è®¤è¯å¤´
- [ ] ä½¿ç”¨å…¬å…±ç«¯ç‚¹ `/spot/order_book`
- [ ] æ·»åŠ å‚æ•° `with_id=true` è·å– update_id

---

## ğŸ‰ æœ€ç»ˆæ€»ç»“

| é—®é¢˜ | ç­”æ¡ˆ |
|------|------|
| **æ˜¯å¦éœ€è¦ API Keyï¼Ÿ** | âŒ **ä¸éœ€è¦** |
| **æ˜¯å¦éœ€è¦æ³¨å†Œè´¦å·ï¼Ÿ** | âŒ ä¸éœ€è¦ï¼ˆä½†æœ‰è´¦å·æ›´å¥½ï¼‰ |
| **æ˜¯å¦éœ€è¦é…ç½®å¯†é’¥ï¼Ÿ** | âŒ ä¸éœ€è¦ |
| **å…¬å…± API æ˜¯å¦å¤Ÿç”¨ï¼Ÿ** | âœ… **å®Œå…¨å¤Ÿç”¨** |
| **é€Ÿç‡é™åˆ¶æ˜¯å¦å®‰å…¨ï¼Ÿ** | âœ… 48% ä½¿ç”¨ç‡ï¼Œéå¸¸å®‰å…¨ |
| **æ˜¯å¦æœ‰å°ç¦é£é™©ï¼Ÿ** | âœ… æä½ï¼ˆæ­£å¸¸ä½¿ç”¨ï¼‰ |

---

## ğŸ“š å‚è€ƒèµ„æ–™

- **Gate.io API æ–‡æ¡£**: https://www.gate.io/docs/developers/apiv4/
- **è®¢å•ç°¿ç«¯ç‚¹**: https://www.gate.io/docs/developers/apiv4/en/#retrieve-order-book
- **é€Ÿç‡é™åˆ¶è¯´æ˜**: https://www.gate.io/docs/developers/apiv4/en/#api-overview

---

**âœ… ç¡®è®¤ï¼šä½ å¯ä»¥ç›´æ¥è¿è¡Œï¼Œæ— éœ€ä»»ä½• API Keyï¼** ğŸ‰

**ğŸš€ ç«‹å³å¼€å§‹é‡‡é›†ï¼š**

```bash
# å¯åŠ¨è®¢å•ç°¿é‡‡é›†ï¼ˆæ— éœ€ API Keyï¼‰
sudo systemctl start orderbook-collector

# æŸ¥çœ‹æ—¥å¿—
tail -f ~/quants-lab/logs/orderbook_collection.log
```

**åº”è¯¥çœ‹åˆ°**:
```
âœ… BTC-USDT: Collected with update_id=548631456, 100 bids, 100 asks
âœ… IRON-USDT: Collected with update_id=548632001, 100 bids, 100 asks
```

**ğŸŠ æ— éœ€ API Keyï¼Œç›´æ¥å¯ç”¨ï¼** âœ¨

