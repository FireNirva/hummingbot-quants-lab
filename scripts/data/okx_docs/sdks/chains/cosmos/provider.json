{
  "title": "Provider API | cosmos | 连接浏览器插件钱包 | 接入 Web3 钱包 | DEX API 文档 | 欧易",
  "text": "Provider API\n#\n什么是 Injected provider API？\n#\n欧易 Injected providers API 是一个 JavaScript API，欧易将其注入用户访问的网站。您的 DApp 可以使用此 API 请求用户帐户，从用户连接的区块链读取数据，帮助用户签署消息和交易。\nNote\n: Cosmos 接入仅支持欧易 Web3 钱包插件端。\n连接账户\n#\n#\nwindow.okxwallet.keplr.enable(chainIds)\n描述\n如果插件当前被锁定，\nwindow.keplr.enable（chainIds）\n方法请求解锁插件。如果用户未授予该网页的权限，它将要求用户授予该网页访问\nKeplr\n的权限。\nenable\n方法可以接收一个或多个链id作为数组。当传递链id数组时，你可以同时请求尚未授权的所有链的权限。\n如果用户取消解锁或拒绝权限，将抛出错误。\nenable\n(\nchainIds\n:\nstring\n|\nstring\n[\n]\n)\n:\nPromise\n<\nvoid\n>\n例子\n在\ncodeopen\n中打开。\nConnect Cosmos\nHTML\nJavaScript\n<\nbutton\nclass\n=\n\"\nconnectCosmosButton\n\"\n>\nConnect Cosmos\n</\nbutton\n>\nconst\nconnectCosmosButton\n=\ndocument\n.\nquerySelector\n(\n'.connectCosmosButton'\n)\n;\nconnectCosmosButton\n.\naddEventListener\n(\n'click'\n,\nasync\n(\n)\n=>\n{\ntry\n{\nconst\nchainId\n=\n\"cosmoshub-4\"\n;\n// Enabling before using the Keplr is recommended.\n// This method will ask the user whether to allow access if they haven't visited this website.\n// Also, it will request that the user unlock the wallet if the wallet is locked.\nawait\nwindow\n.\nokxwallet\n.\nkeplr\n.\nenable\n(\nchainId\n)\n;\nconsole\n.\nlog\n(\nres\n)\n;\n}\ncatch\n(\nerror\n)\n{\nconsole\n.\nlog\n(\nerror\n)\n;\n}\n}\n)\n;\n签名交易\n#\n#\nwindow.okxwallet.keplr.signAmino(chainId, signer, signDoc)\n描述\n按照固定格式签名，类似 cosmjs 的 OfflineSigner 的 signAmino 方法\n参数就是对象，signDoc 就是一个固定格式\nwindow\n.\nokxwallet\n.\nkeplr\n.\nsignAmino\n(\nchainId\n:\nstring\n,\nsigner\n:\nstring\n,\nsignDoc\n:\nStdSignDoc\n,\nsignOptions\n:\nany\n)\n:\nPromise\n<\nAminoSignResponse\n>\n例子\n在\ncodeopen\n中打开。\nConnect Cosmos\nSend Transaction\nHTML\nJavaScript\n<\nbutton\nclass\n=\n\"\nconnectCosmosButton btn\n\"\n>\nConnect Cosmos\n</\nbutton\n>\n<\nbutton\nclass\n=\n\"\nsignTransactionButton btn\n\"\n>\nSign Transaction\n</\nbutton\n>\nconst\nconnectCosmosButton\n=\ndocument\n.\nquerySelector\n(\n'.connectCosmosButton'\n)\n;\nconst\nsignTransactionButton\n=\ndocument\n.\nquerySelector\n(\n'.signTransactionButton'\n)\n;\nsignTransactionButton\n.\naddEventListener\n(\n'click'\n,\nasync\n(\n)\n=>\n{\ntry\n{\nconst\nres\n=\nconst\nres\n=\nawait\nwindow\n.\nokxwallet\n.\nkeplr\n.\nsignAmino\n(\n\"osmosis-1\"\n,\n\"osmo1sxqwesgp7253fdv985csvz95fwc0q53ulldggl\"\n,\n{\naccount_number\n:\n\"707744\"\n,\nchain_id\n:\n\"osmosis-1\"\n,\nfee\n:\n{\ngas\n:\n\"500000\"\n,\namount\n:\n[\n{\ndenom\n:\n\"uosmo\"\n,\namount\n:\n\"12500\"\n}\n]\n}\n,\nmemo\n:\n\"\"\n,\nmsgs\n:\n[\n{\ntype\n:\n\"osmosis/gamm/swap-exact-amount-in\"\n,\nvalue\n:\n{\nroutes\n:\n[\n{\npool_id\n:\n\"795\"\n,\ntoken_out_denom\n:\n\"uosmo\"\n}\n,\n{\npool_id\n:\n\"1\"\n,\ntoken_out_denom\n:\n\"ibc/27394FB092D2ECCD56123C74F36E4C1F926001CEADA9CA97EA622B25F41E5EB2\"\n}\n]\n,\nsender\n:\n\"osmo1sxqwesgp7253fdv985csvz95fwc0q53ulldggl\"\n,\ntoken_in\n:\n{\namount\n:\n\"10000\"\n,\ndenom\n:\n\"ibc/2DA9C149E9AD2BD27FEFA635458FB37093C256C1A940392634A16BEA45262604\"\n}\n,\ntoken_out_min_amount\n:\n\"553\"\n}\n}\n]\n,\nsequence\n:\n\"54\"\n}\n)\n;\nconsole\n.\nlog\n(\nres\n)\n;\n}\ncatch\n(\nerror\n)\n{\nconsole\n.\nlog\n(\nerror\n)\n}\n}\n)\n;\nconnectCosmosButton\n.\naddEventListener\n(\n'click'\n,\nasync\n(\n)\n=>\n{\ntry\n{\nconst\nchainId\n=\n\"cosmoshub-4\"\n;\n// Enabling before using the Keplr is recommended.\n// This method will ask the user whether to allow access if they haven't visited this website.\n// Also, it will request that the user unlock the wallet if the wallet is locked.\nconst\nres\n=\nawait\nwindow\n.\nkeplr\n.\nenable\n(\nchainId\n)\n;\nconsole\n.\nlog\n(\nres\n)\n;\n}\ncatch\n(\nerror\n)\n{\nconsole\n.\nlog\n(\nerror\n)\n;\n}\n}\n)\n;\n签名信息\n#\n#\nwindow.okxwallet.keplr.signArbitrary(chainId, signer, data)\n描述\n签名任意信息，相当于之前几个链的\nsignMessage(any)\n。\nsignArbitrary\n(\nchainId\n:\nstring\n,\nsigner\n:\nstring\n,\ndata\n:\nstring\n|\nUint8Array\n)\n:\nPromise\n<\nStdSignature\n>\n;\nverifyArbitrary\n(\nchainId\n:\nstring\n,\nsigner\n:\nstring\n,\ndata\n:\nstring\n|\nUint8Array\n,\nsignature\n:\nStdSignature\n)\n:\nPromise\n<\nboolean\n>\n;\n例子\n在\ncodeopen\n中打开。\nConnect Cosmos\nSign Message\nHTML\nJavaScript\n<\nbutton\nclass\n=\n\"\nconnectCosmosButton btn\n\"\n>\nConnect Cosmos\n</\nbutton\n>\n<\nbutton\nclass\n=\n\"\nsignMessageButton btn\n\"\n>\nSign Message\n</\nbutton\n>\nconst\nconnectCosmosButton\n=\ndocument\n.\nquerySelector\n(\n'.connectCosmosButton'\n)\n;\nconst\nsignMessageButton\n=\ndocument\n.\nquerySelector\n(\n'.signMessageButton'\n)\n;\nsignMessageButton\n.\naddEventListener\n(\n'click'\n,\nasync\n(\n)\n=>\n{\ntry\n{\nconst\nres\n=\nconst\nres\n=\nawait\nwindow\n.\nokxwallet\n.\nkeplr\n.\nsignArbitrary\n(\n\"osmosis-1\"\n,\n\"osmo1sxqwesgp7253fdv985csvz95fwc0q53ulldggl\"\n,\n'test cosmos'\n}\n)\n;\nconsole\n.\nlog\n(\nres\n)\n;\n}\ncatch\n(\nerror\n)\n{\nconsole\n.\nlog\n(\nerror\n)\n}\n}\n)\n;\nconnectCosmosButton\n.\naddEventListener\n(\n'click'\n,\nasync\n(\n)\n=>\n{\ntry\n{\nconst\nchainId\n=\n\"cosmoshub-4\"\n;\n// Enabling before using the Keplr is recommended.\n// This method will ask the user whether to allow access if they haven't visited this website.\n// Also, it will request that the user unlock the wallet if the wallet is locked.\nconst\nres\n=\nawait\nwindow\n.\nkeplr\n.\nenable\n(\nchainId\n)\n;\nconsole\n.\nlog\n(\nres\n)\n;\n}\ncatch\n(\nerror\n)\n{\nconsole\n.\nlog\n(\nerror\n)\n;\n}\n}\n)\n;\n事件\n#\n成功连接\n连接到欧易 Web3 钱包可以通过调用\nwindow.okxwallet.keplr.enable(chainId)\n。 当用户接受连接请求时，会触发连接事件。\n用法\nwindow\n.\nokxwallet\n.\nkeplr\n.\non\n(\n\"connect\"\n,\n(\n)\n=>\nconsole\n.\nlog\n(\n\"connected!\"\n)\n)\n;\n例子\n在\ncodeopen\n中打开。\nConnect Cosmos\nResult:\nCannot read properties of undefined (reading 'keplr')\nHTML\nJavaScript\n<\nbutton\nclass\n=\n\"\nconnectCosmosButton\n\"\n>\nConnect Cosmos\n</\nbutton\n>\nconst\nconnectCosmosButton\n=\ndocument\n.\nquerySelector\n(\n'.connectCosmosButton'\n)\n;\nwindow\n.\nokxwallet\n.\nkeplr\n.\non\n(\n\"connect\"\n,\n(\n)\n=>\nconsole\n.\nlog\n(\n\"connected!\"\n)\n)\n;\nconnectCosmosButton\n.\naddEventListener\n(\n'click'\n,\n(\n)\n=>\n{\ntry\n{\nconst\nchainId\n=\n\"cosmoshub-4\"\n;\n// Enabling before using the Keplr is recommended.\n// This method will ask the user whether to allow access if they haven't visited this website.\n// Also, it will request that the user unlock the wallet if the wallet is locked.\nconst\nres\n=\nawait\nwindow\n.\nokxwallet\n.\nkeplr\n.\nenable\n(\nchainId\n)\n;\nconsole\n.\nlog\n(\nres\n)\n;\n}\ncatch\n(\nerror\n)\n{\nconsole\n.\nlog\n(\nerror\n)\n;\n}\n}\n)\n;",
  "html": "<div class=\"routes_md__xWlGF\"><!--$--><h1 id=\"provider-api\">Provider API<a class=\"index_header-anchor__Xqb+L\" href=\"#provider-api\" style=\"opacity:0\">#</a></h1>\n<h2 data-content=\"什么是 Injected provider API？\" id=\"什么是-injected-provider-api？\">什么是 Injected provider API？<a class=\"index_header-anchor__Xqb+L\" href=\"#什么是-injected-provider-api？\" style=\"opacity:0\">#</a></h2>\n<p>欧易 Injected providers API 是一个 JavaScript API，欧易将其注入用户访问的网站。您的 DApp 可以使用此 API 请求用户帐户，从用户连接的区块链读取数据，帮助用户签署消息和交易。</p>\n<p><strong>Note</strong>: Cosmos 接入仅支持欧易 Web3 钱包插件端。</p>\n<h2 data-content=\"连接账户\" id=\"连接账户\">连接账户<a class=\"index_header-anchor__Xqb+L\" href=\"#连接账户\" style=\"opacity:0\">#</a></h2>\n<p>#<code>window.okxwallet.keplr.enable(chainIds)</code></p>\n<p><strong>描述</strong></p>\n<p>如果插件当前被锁定，<code>window.keplr.enable（chainIds）</code>方法请求解锁插件。如果用户未授予该网页的权限，它将要求用户授予该网页访问 <code>Keplr</code> 的权限。\n<code>enable</code> 方法可以接收一个或多个链id作为数组。当传递链id数组时，你可以同时请求尚未授权的所有链的权限。\n如果用户取消解锁或拒绝权限，将抛出错误。</p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function\">enable</span><span class=\"token punctuation\">(</span>chainIds<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">&gt;</span>\n</code></pre></div>\n<p><strong>例子</strong></p>\n<p>在 <a class=\"items-center\" href=\"https://codepen.io/okxwallet/pen/qBMRrEo\" rel=\"nofollow noreferrer\" style=\"display:inline-flex;line-height:16px\" target=\"_blank\">codeopen<i aria-hidden=\"true\" class=\"icon iconfont doc-ssr-okds-open-link\" role=\"img\" style=\"font-size:24px;color:#0569FF;margin-left:2px\"></i></a>中打开。</p>\n<div><button class=\"okui-btn btn-md btn-fill-highlight\" type=\"button\"><span class=\"btn-content\">Connect Cosmos</span></button></div>\n<div class=\"okui-tabs\" style=\"height:auto;margin-top:14px\"><div class=\"okui-tabs-pane-list okui-tabs-pane-list-md okui-tabs-pane-list-blue okui-tabs-pane-list-underline\"><div class=\"okui-tabs-pane-list-wrapper underline-special-style\"><div class=\"okui-tabs-pane-list-container\" role=\"tablist\"><div class=\"okui-tabs-pane-list-flex-shrink\"><div aria-selected=\"true\" class=\"okui-tabs-pane okui-tabs-pane-spacing okui-tabs-pane-md okui-tabs-pane-blue okui-tabs-pane-underline okui-tabs-pane-underline-active\" data-pane-id=\"HTML\" id=\":Rpbf:-HTML\" role=\"tab\" style=\"--okd-inner-tabs-spacing:8px\" tabindex=\"0\">HTML</div><div aria-selected=\"false\" class=\"okui-tabs-pane okui-tabs-pane-spacing okui-tabs-pane-md okui-tabs-pane-blue okui-tabs-pane-underline\" data-pane-id=\"JavaScript\" id=\":Rpbf:-JavaScript\" role=\"tab\" style=\"--okd-inner-tabs-spacing:8px\" tabindex=\"-1\">JavaScript</div></div></div></div></div><div class=\"okui-tabs-panel-list\"><div aria-hidden=\"false\" aria-labelledby=\":Rpbf:-HTML\" class=\"okui-tabs-panel okui-tabs-panel-show\" role=\"tabpanel\" tabindex=\"0\"><div class=\"remark-highlight\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>connectCosmosButton<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Connect Cosmos<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div></div><div aria-hidden=\"true\" aria-labelledby=\":Rpbf:-JavaScript\" class=\"okui-tabs-panel\" role=\"tabpanel\" tabindex=\"-1\"><div class=\"remark-highlight\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> connectCosmosButton <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.connectCosmosButton'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconnectCosmosButton<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> chainId <span class=\"token operator\">=</span> <span class=\"token string\">\"cosmoshub-4\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// Enabling before using the Keplr is recommended.</span>\n    <span class=\"token comment\">// This method will ask the user whether to allow access if they haven't visited this website.</span>\n    <span class=\"token comment\">// Also, it will request that the user unlock the wallet if the wallet is locked.</span>\n    <span class=\"token keyword control-flow\">await</span> <span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">okxwallet</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">keplr</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">enable</span><span class=\"token punctuation\">(</span>chainId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div></div></div></div>\n<h2 data-content=\"签名交易\" id=\"签名交易\">签名交易<a class=\"index_header-anchor__Xqb+L\" href=\"#签名交易\" style=\"opacity:0\">#</a></h2>\n<p>#<code>window.okxwallet.keplr.signAmino(chainId, signer, signDoc)</code></p>\n<p><strong>描述</strong></p>\n<p>按照固定格式签名，类似 cosmjs 的 OfflineSigner 的 signAmino 方法</p>\n<p>参数就是对象，signDoc 就是一个固定格式</p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\">window<span class=\"token punctuation\">.</span>okxwallet<span class=\"token punctuation\">.</span>keplr<span class=\"token punctuation\">.</span><span class=\"token function\">signAmino</span><span class=\"token punctuation\">(</span>chainId<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> signer<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> signDoc<span class=\"token operator\">:</span> StdSignDoc<span class=\"token punctuation\">,</span> signOptions<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>AminoSignResponse<span class=\"token operator\">&gt;</span>\n</code></pre></div>\n<p><strong>例子</strong></p>\n<p>在 <a class=\"items-center\" href=\"https://codepen.io/okxwallet/pen/PodWmJm\" rel=\"nofollow noreferrer\" style=\"display:inline-flex;line-height:16px\" target=\"_blank\">codeopen<i aria-hidden=\"true\" class=\"icon iconfont doc-ssr-okds-open-link\" role=\"img\" style=\"font-size:24px;color:#0569FF;margin-left:2px\"></i></a>中打开。</p>\n<div class=\"interact-wrapper\"><button class=\"okui-btn btn-md btn-fill-highlight\" type=\"button\"><span class=\"btn-content\">Connect Cosmos</span></button><button class=\"okui-btn btn-md btn-outline-primary\" style=\"margin-left:14px\" type=\"button\"><span class=\"btn-content\">Send Transaction</span></button><div></div></div>\n<div class=\"okui-tabs\" style=\"height:auto;margin-top:14px\"><div class=\"okui-tabs-pane-list okui-tabs-pane-list-md okui-tabs-pane-list-blue okui-tabs-pane-list-underline\"><div class=\"okui-tabs-pane-list-wrapper underline-special-style\"><div class=\"okui-tabs-pane-list-container\" role=\"tablist\"><div class=\"okui-tabs-pane-list-flex-shrink\"><div aria-selected=\"true\" class=\"okui-tabs-pane okui-tabs-pane-spacing okui-tabs-pane-md okui-tabs-pane-blue okui-tabs-pane-underline okui-tabs-pane-underline-active\" data-pane-id=\"HTML\" id=\":R1dbf:-HTML\" role=\"tab\" style=\"--okd-inner-tabs-spacing:8px\" tabindex=\"0\">HTML</div><div aria-selected=\"false\" class=\"okui-tabs-pane okui-tabs-pane-spacing okui-tabs-pane-md okui-tabs-pane-blue okui-tabs-pane-underline\" data-pane-id=\"JavaScript\" id=\":R1dbf:-JavaScript\" role=\"tab\" style=\"--okd-inner-tabs-spacing:8px\" tabindex=\"-1\">JavaScript</div></div></div></div></div><div class=\"okui-tabs-panel-list\"><div aria-hidden=\"false\" aria-labelledby=\":R1dbf:-HTML\" class=\"okui-tabs-panel okui-tabs-panel-show\" role=\"tabpanel\" tabindex=\"0\"><div class=\"remark-highlight\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>connectCosmosButton btn<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Connect Cosmos<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>signTransactionButton btn<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Sign Transaction<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div></div><div aria-hidden=\"true\" aria-labelledby=\":R1dbf:-JavaScript\" class=\"okui-tabs-panel\" role=\"tabpanel\" tabindex=\"-1\"><div class=\"remark-highlight\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> connectCosmosButton <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.connectCosmosButton'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> signTransactionButton <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.signTransactionButton'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nsignTransactionButton<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span>  <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword control-flow\">await</span> <span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">okxwallet</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">keplr</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">signAmino</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"osmosis-1\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"osmo1sxqwesgp7253fdv985csvz95fwc0q53ulldggl\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">account_number</span><span class=\"token operator\">:</span> <span class=\"token string\">\"707744\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">chain_id</span><span class=\"token operator\">:</span> <span class=\"token string\">\"osmosis-1\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">fee</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">gas</span><span class=\"token operator\">:</span> <span class=\"token string\">\"500000\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">amount</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">{</span>\n              <span class=\"token literal-property property\">denom</span><span class=\"token operator\">:</span> <span class=\"token string\">\"uosmo\"</span><span class=\"token punctuation\">,</span>\n              <span class=\"token literal-property property\">amount</span><span class=\"token operator\">:</span> <span class=\"token string\">\"12500\"</span>\n            <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">memo</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">msgs</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">\"osmosis/gamm/swap-exact-amount-in\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token literal-property property\">routes</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">{</span>\n                  <span class=\"token literal-property property\">pool_id</span><span class=\"token operator\">:</span> <span class=\"token string\">\"795\"</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token literal-property property\">token_out_denom</span><span class=\"token operator\">:</span> <span class=\"token string\">\"uosmo\"</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span>\n                  <span class=\"token literal-property property\">pool_id</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token literal-property property\">token_out_denom</span><span class=\"token operator\">:</span>\n                    <span class=\"token string\">\"ibc/27394FB092D2ECCD56123C74F36E4C1F926001CEADA9CA97EA622B25F41E5EB2\"</span>\n                <span class=\"token punctuation\">}</span>\n              <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n              <span class=\"token literal-property property\">sender</span><span class=\"token operator\">:</span> <span class=\"token string\">\"osmo1sxqwesgp7253fdv985csvz95fwc0q53ulldggl\"</span><span class=\"token punctuation\">,</span>\n              <span class=\"token literal-property property\">token_in</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token literal-property property\">amount</span><span class=\"token operator\">:</span> <span class=\"token string\">\"10000\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token literal-property property\">denom</span><span class=\"token operator\">:</span>\n                  <span class=\"token string\">\"ibc/2DA9C149E9AD2BD27FEFA635458FB37093C256C1A940392634A16BEA45262604\"</span>\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n              <span class=\"token literal-property property\">token_out_min_amount</span><span class=\"token operator\">:</span> <span class=\"token string\">\"553\"</span>\n            <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">sequence</span><span class=\"token operator\">:</span> <span class=\"token string\">\"54\"</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconnectCosmosButton<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> chainId <span class=\"token operator\">=</span> <span class=\"token string\">\"cosmoshub-4\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// Enabling before using the Keplr is recommended.</span>\n    <span class=\"token comment\">// This method will ask the user whether to allow access if they haven't visited this website.</span>\n    <span class=\"token comment\">// Also, it will request that the user unlock the wallet if the wallet is locked.</span>\n    <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword control-flow\">await</span> <span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">keplr</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">enable</span><span class=\"token punctuation\">(</span>chainId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div></div></div></div>\n<h2 data-content=\"签名信息\" id=\"签名信息\">签名信息<a class=\"index_header-anchor__Xqb+L\" href=\"#签名信息\" style=\"opacity:0\">#</a></h2>\n<p>#<code>window.okxwallet.keplr.signArbitrary(chainId, signer, data)</code></p>\n<p><strong>描述</strong></p>\n<p>签名任意信息，相当于之前几个链的 <code>signMessage(any)</code>。</p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function\">signArbitrary</span><span class=\"token punctuation\">(</span>\n    chainId<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n    signer<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n    data<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> Uint8Array\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>StdSignature<span class=\"token operator\">&gt;</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">verifyArbitrary</span><span class=\"token punctuation\">(</span>\n    chainId<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n    signer<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n    data<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> Uint8Array<span class=\"token punctuation\">,</span>\n    signature<span class=\"token operator\">:</span> StdSignature\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">boolean</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">;</span>\n\n</code></pre></div>\n<p><strong>例子</strong></p>\n<p>在 <a class=\"items-center\" href=\"https://codepen.io/okxwallet/pen/NWLdgKL\" rel=\"nofollow noreferrer\" style=\"display:inline-flex;line-height:16px\" target=\"_blank\">codeopen<i aria-hidden=\"true\" class=\"icon iconfont doc-ssr-okds-open-link\" role=\"img\" style=\"font-size:24px;color:#0569FF;margin-left:2px\"></i></a>中打开。</p>\n<div class=\"send-tx-wrapper\"><button class=\"okui-btn btn-md btn-fill-highlight\" type=\"button\"><span class=\"btn-content\">Connect Cosmos</span></button><button class=\"okui-btn btn-md btn-outline-primary\" style=\"margin-left:14px\" type=\"button\"><span class=\"btn-content\">Sign Message</span></button><div></div></div>\n<div class=\"okui-tabs\" style=\"height:auto;margin-top:14px\"><div class=\"okui-tabs-pane-list okui-tabs-pane-list-md okui-tabs-pane-list-blue okui-tabs-pane-list-underline\"><div class=\"okui-tabs-pane-list-wrapper underline-special-style\"><div class=\"okui-tabs-pane-list-container\" role=\"tablist\"><div class=\"okui-tabs-pane-list-flex-shrink\"><div aria-selected=\"true\" class=\"okui-tabs-pane okui-tabs-pane-spacing okui-tabs-pane-md okui-tabs-pane-blue okui-tabs-pane-underline okui-tabs-pane-underline-active\" data-pane-id=\"HTML\" id=\":R1vbf:-HTML\" role=\"tab\" style=\"--okd-inner-tabs-spacing:8px\" tabindex=\"0\">HTML</div><div aria-selected=\"false\" class=\"okui-tabs-pane okui-tabs-pane-spacing okui-tabs-pane-md okui-tabs-pane-blue okui-tabs-pane-underline\" data-pane-id=\"JavaScript\" id=\":R1vbf:-JavaScript\" role=\"tab\" style=\"--okd-inner-tabs-spacing:8px\" tabindex=\"-1\">JavaScript</div></div></div></div></div><div class=\"okui-tabs-panel-list\"><div aria-hidden=\"false\" aria-labelledby=\":R1vbf:-HTML\" class=\"okui-tabs-panel okui-tabs-panel-show\" role=\"tabpanel\" tabindex=\"0\"><div class=\"remark-highlight\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>connectCosmosButton btn<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Connect Cosmos<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>signMessageButton btn<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Sign Message<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div></div><div aria-hidden=\"true\" aria-labelledby=\":R1vbf:-JavaScript\" class=\"okui-tabs-panel\" role=\"tabpanel\" tabindex=\"-1\"><div class=\"remark-highlight\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> connectCosmosButton <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.connectCosmosButton'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> signMessageButton <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.signMessageButton'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nsignMessageButton<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span>  <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword control-flow\">await</span> <span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">okxwallet</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">keplr</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">signArbitrary</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"osmosis-1\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"osmo1sxqwesgp7253fdv985csvz95fwc0q53ulldggl\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'test cosmos'</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconnectCosmosButton<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> chainId <span class=\"token operator\">=</span> <span class=\"token string\">\"cosmoshub-4\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// Enabling before using the Keplr is recommended.</span>\n    <span class=\"token comment\">// This method will ask the user whether to allow access if they haven't visited this website.</span>\n    <span class=\"token comment\">// Also, it will request that the user unlock the wallet if the wallet is locked.</span>\n    <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword control-flow\">await</span> <span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">keplr</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">enable</span><span class=\"token punctuation\">(</span>chainId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div></div></div></div>\n<h2 data-content=\"事件\" id=\"事件\">事件<a class=\"index_header-anchor__Xqb+L\" href=\"#事件\" style=\"opacity:0\">#</a></h2>\n<p><strong>成功连接</strong></p>\n<p>连接到欧易 Web3 钱包可以通过调用 <code>window.okxwallet.keplr.enable(chainId)</code>。 当用户接受连接请求时，会触发连接事件。</p>\n<p><strong>用法</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\">window<span class=\"token punctuation\">.</span>okxwallet<span class=\"token punctuation\">.</span>keplr<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"connect\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"connected!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p><strong>例子</strong></p>\n<p>在 <a class=\"items-center\" href=\"https://codepen.io/okxwallet/pen/QWVdpzp\" rel=\"nofollow noreferrer\" style=\"display:inline-flex;line-height:16px\" target=\"_blank\">codeopen<i aria-hidden=\"true\" class=\"icon iconfont doc-ssr-okds-open-link\" role=\"img\" style=\"font-size:24px;color:#0569FF;margin-left:2px\"></i></a>中打开。</p>\n<div><button class=\"okui-btn btn-md btn-fill-highlight\" type=\"button\"><span class=\"btn-content\">Connect Cosmos</span></button><p class=\"feedback-wrapper\"><strong>Result: </strong> Cannot read properties of undefined (reading 'keplr')</p></div>\n<div class=\"okui-tabs\" style=\"height:auto;margin-top:14px\"><div class=\"okui-tabs-pane-list okui-tabs-pane-list-md okui-tabs-pane-list-blue okui-tabs-pane-list-underline\"><div class=\"okui-tabs-pane-list-wrapper underline-special-style\"><div class=\"okui-tabs-pane-list-container\" role=\"tablist\"><div class=\"okui-tabs-pane-list-flex-shrink\"><div aria-selected=\"true\" class=\"okui-tabs-pane okui-tabs-pane-spacing okui-tabs-pane-md okui-tabs-pane-blue okui-tabs-pane-underline okui-tabs-pane-underline-active\" data-pane-id=\"HTML\" id=\":R2hbf:-HTML\" role=\"tab\" style=\"--okd-inner-tabs-spacing:8px\" tabindex=\"0\">HTML</div><div aria-selected=\"false\" class=\"okui-tabs-pane okui-tabs-pane-spacing okui-tabs-pane-md okui-tabs-pane-blue okui-tabs-pane-underline\" data-pane-id=\"JavaScript\" id=\":R2hbf:-JavaScript\" role=\"tab\" style=\"--okd-inner-tabs-spacing:8px\" tabindex=\"-1\">JavaScript</div></div></div></div></div><div class=\"okui-tabs-panel-list\"><div aria-hidden=\"false\" aria-labelledby=\":R2hbf:-HTML\" class=\"okui-tabs-panel okui-tabs-panel-show\" role=\"tabpanel\" tabindex=\"0\"><div class=\"remark-highlight\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>connectCosmosButton<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Connect Cosmos<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div></div><div aria-hidden=\"true\" aria-labelledby=\":R2hbf:-JavaScript\" class=\"okui-tabs-panel\" role=\"tabpanel\" tabindex=\"-1\"><div class=\"remark-highlight\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> connectCosmosButton <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.connectCosmosButton'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">okxwallet</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">keplr</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"connect\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=&gt;</span> <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"connected!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconnectCosmosButton<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> chainId <span class=\"token operator\">=</span> <span class=\"token string\">\"cosmoshub-4\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// Enabling before using the Keplr is recommended.</span>\n    <span class=\"token comment\">// This method will ask the user whether to allow access if they haven't visited this website.</span>\n    <span class=\"token comment\">// Also, it will request that the user unlock the wallet if the wallet is locked.</span>\n    <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword control-flow\">await</span> <span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">okxwallet</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">keplr</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">enable</span><span class=\"token punctuation\">(</span>chainId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div></div></div></div><!--/$--></div>",
  "url": "https://web3.okx.com/zh-hans/build/dev-docs/sdks/chains/cosmos/provider#签名信息",
  "navigation": {
    "breadcrumbs": [
      "DApp 连接钱包",
      "cosmos",
      "Provider API"
    ],
    "sidebar_links": [
      "什么是连接钱包",
      "支持的网络",
      "接入前提",
      "EVM 兼容链",
      "Bitcoin 兼容链",
      "Solana 兼容链",
      "TON",
      "SUI",
      "Aptos/Movement",
      "Cosmos 系/Sei",
      "Tron",
      "Starknet",
      "常见问题",
      "接入前提",
      "EVM 兼容链",
      "Bitcoin 兼容链",
      "Tron",
      "Solana 兼容链",
      "TON",
      "Aptos/Movement"
    ],
    "toc": [
      "什么是 Injected provider API？",
      "连接账户",
      "签名交易",
      "签名信息",
      "事件"
    ]
  },
  "word_count": 992,
  "extract_time": "2025-05-27 07:18:29"
}