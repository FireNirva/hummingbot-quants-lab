{
  "title": "Provider API (Fractal Bitcoin) | Bitcoin | 连接浏览器插件钱包 | 接入 Web3 钱包 | DEX API 文档 | 欧易",
  "text": "Provider API (Fractal Bitcoin)\n#\n什么是 Injected provider API (Fractal Bitcoin) ？\n#\nOKX Injected Providers API (Fractal Bitcoin) 基于 JavaScript 模型，由 OKX 嵌入用户访问网站中。\nDApp 项目可以通过调用此 API 请求用户账户信息，从用户所连接的区块链中读取数据，并协助用户进行消息和交易的签署。\n注：Fractal Bitcoin 仅适用于钱包插件端为 3.12.1 或更高版本。\nconnect\n#\n描述\n连接钱包\nokxwallet.fractalBitcoin.connect()\n参数\n无\n返回值\nPromise - object\naddress - string：当前账户的地址\npublicKey - string：当前账户的公钥\n示例\nconst\nresult\n=\nawait\nokxwallet\n.\nfractalBitcoin\n.\nconnect\n(\n)\n// example\n{\naddress\n:\n'bc1pwqye6x35g2n6xpwalywhpsvsu39k3l6086cvdgqazlw9mz2meansz9knaq'\n,\npublicKey\n:\n'4a627f388196639041ce226c0229560127ef9a5a39d4885123cd82dc82d8b497'\n,\ncompressedPublicKey\n:\n'034a627f388196639041ce226c0229560127ef9a5a39d4885123cd82dc82d8b497'\n,\n}\nrequestAccounts\n#\nokxwallet.fractalBitcoin.requestAccounts()\n描述\n请求连接当前账户\n参数\n无\n返回值\nPromise - string[]：当前账户的地址\n示例\ntry\n{\nlet\naccounts\n=\nawait\nokxwallet\n.\nfractalBitcoin\n.\nrequestAccounts\n(\n)\n;\nconsole\n.\nlog\n(\n'connect success'\n,\naccounts\n)\n;\n}\ncatch\n(\ne\n)\n{\nconsole\n.\nlog\n(\n'connect failed'\n)\n;\n}\n// example\n[\n'tb1qrn7tvhdf6wnh790384ahj56u0xaa0kqgautnnz'\n]\n;\ngetAccounts\n#\nokxwallet.fractalBitcoin.getAccounts()\n描述\n获取当前账户地址\n参数\n无\n返回值\nPromise - string[]：当前账户地址\n示例\ntry\n{\nlet\nres\n=\nawait\nokxwallet\n.\nfractalBitcoin\n.\ngetAccounts\n(\n)\n;\nconsole\n.\nlog\n(\nres\n)\n;\n}\ncatch\n(\ne\n)\n{\nconsole\n.\nlog\n(\ne\n)\n;\n}\n// example\n[\n'tb1qrn7tvhdf6wnh790384ahj56u0xaa0kqgautnnz'\n]\n;\ngetPublicKey\n#\nokxwallet.fractalBitcoin.getPublicKey()\n描述\n获取当前账户的公钥\n参数\n无\n返回值\nPromise - string：公钥\n示例\ntry\n{\nlet\nres\n=\nawait\nokxwallet\n.\nfractalBitcoin\n.\ngetPublicKey\n(\n)\n;\nconsole\n.\nlog\n(\nres\n)\n}\ncatch\n(\ne\n)\n{\nconsole\n.\nlog\n(\ne\n)\n;\n}\n// example\n03cbaedc26f03fd3ba02fc936f338e980c9e2172c5e23128877ed46827e935296f\ngetBalance\n#\nokxwallet.fractalBitcoin.getBalance()\n描述\n获取 BTC 余额\n参数\n无\n返回值\nPromise - object：\nconfirmed - number：已确认的聪数量\nunconfirmed - number：未经确认的聪数量\ntotal - number：总聪量\n示例\ntry\n{\nlet\nres\n=\nawait\nokxwallet\n.\nfractalBitcoin\n.\ngetBalance\n(\n)\n;\nconsole\n.\nlog\n(\nres\n)\n}\ncatch\n(\ne\n)\n{\nconsole\n.\nlog\n(\ne\n)\n;\n}\n// example\n{\n\"confirmed\"\n:\n0\n,\n\"unconfirmed\"\n:\n100000\n,\n\"total\"\n:\n100000\n}\nsignMessage\n#\nokxwallet.fractalBitcoin.signMessage(signStr[, type])\n描述\n签名消息\n参数\nsignStr - string：需要签名的数据\ntype - string： (可选) \"ecdsa\" | \"bip322-simple\"，默认值是 \"ecdsa\"。(请注意：版本低于 6.51.0 的应用仅支持“ecdsa”签名算法，而版本为 6.51.0 或更高的应用可支持所有签名算法类型。)\n返回值\nPromise - string：签名结果\n示例\nconst\nsignStr\n=\n'need sign string'\n;\nconst\nresult\n=\nawait\nwindow\n.\nokxwallet\n.\nfractalBitcoin\n.\nsignMessage\n(\nsignStr\n,\n'ecdsa'\n)\n// example\nINg2ZeG8b6GsiYLiWeQQpvmfFHqCt3zC6ocdlN9ZRQLhSFZdGhgYWF8ipar1wqJtYufxzSYiZm5kdlAcnxgZWQU\n=\nsignPsbt\n#\nokxwallet.fractalBitcoin.signPsbt(psbtHex[, options])\n描述\n签名 psbt，该方法将遍历所有与当前地址匹配的输入进行签名\n参数\npsbtHex - string：要签名的 psbt 的十六进制字符串\n注：构建交易生成 psbt (string 类型)，如果遇到 input 地址是 Taproot 类型，需要提供公钥。\n示例：可参考下面的 txInput 和 publicKey\nconst\ntxInputs\n:\nutxoInput\n[\n]\n=\n[\n]\n;\ntxInputs\n.\npush\n(\n{\ntxId\n:\n\"1e0f92720ef34ab75eefc5d691b551fb2f783eac61503a69cdf63eb7305d2306\"\n,\nvOut\n:\n2\n,\namount\n:\n341474\n,\naddress\n:\n\"tb1q8h8....mjxzny\"\n,\nprivateKey\n:\n\"0s79......ldjejke\"\n,\npublicKey\n:\n\"tb1q8h8....mjxzny\"\n,\nbip32Derivation\n:\n[\n{\n\"masterFingerprint\"\n:\n\"a22e8e32\"\n,\n\"pubkey\"\n:\n\"tb1q8h8....mjxzny\"\n,\n\"path\"\n:\n\"m/49'/0'/0'/0/0\"\n,\n}\n,\n]\n,\n}\n)\n;\n-\noptions\n-\nautoFinalized\n-\nboolean\n：签名后是否完成 psbt，默认为\ntrue\n-\ntoSignInputs\n-\narray：\n-\nindex\n-\nnumber\n：要签名的输入\n-\naddress\n-\nstring\n：用于签名的相应私钥所对应的地址\n-\npublicKey\n-\nstring\n：用于签名的相应私钥所对应的公钥\n-\nsighashTypes\n-\nnumber\n[\n]\n：\n(\n可选\n)\nsighashTypes\n-\ndisableTweakSigner\n-\nboolean：\n(\n可选\n)\n签名和解锁 Taproot 地址时， 默认使用 tweakSigner 来生成签名，启用此选项允许使用原始私钥进行签名\n返回值\nPromise - string：已签名 psbt 的十六进制字符串\n示例\ntry\n{\nlet\nres\n=\nawait\nokxwallet\n.\nfractalBitcoin\n.\nsignPsbt\n(\n'70736274ff01007d....'\n,\n{\nautoFinalized\n:\nfalse\n,\ntoSignInputs\n:\n[\n{\nindex\n:\n0\n,\naddress\n:\n'tb1q8h8....mjxzny'\n,\n}\n,\n{\nindex\n:\n1\n,\npublicKey\n:\n'tb1q8h8....mjxzny'\n,\nsighashTypes\n:\n[\n1\n]\n,\n}\n,\n{\nindex\n:\n2\n,\npublicKey\n:\n'02062...8779693f'\n,\n}\n,\n]\n,\n}\n)\n;\nconsole\n.\nlog\n(\nres\n)\n;\n}\ncatch\n(\ne\n)\n{\nconsole\n.\nlog\n(\ne\n)\n;\n}\nokxwallet\n.\nfractalBitcoin\n.\nsignPsbt\n(\n'xxxxxxxx'\n,\n{\ntoSignInputs\n:\n[\n{\nindex\n:\n0\n,\npublicKey\n:\n'xxxxxx'\n,\ndisableTweakSigner\n:\ntrue\n}\n]\n,\nautoFinalized\n:\nfalse\n,\n}\n)\n;\nsignPsbts\n#\nokxwallet.fractalBitcoin.signPsbts(psbtHexs[, options])\n描述\n签署多个 psbt，该方法将遍历所有与当前地址匹配的输入进行签名\n参数\npsbtHexs - string[]：要签名的 psbt 的十六进制字符串\n注：构建交易生成 psbt (string 类型)，如果遇到 input 地址是 Taproot 类型，需要提供公钥。\n示例：可参考下面的 txInput 和 publicKey\nconst\ntxInputs\n:\nutxoInput\n[\n]\n=\n[\n]\n;\ntxInputs\n.\npush\n(\n{\ntxId\n:\n\"1e0f92720ef34ab75eefc5d691b551fb2f783eac61503a69cdf63eb7305d2306\"\n,\nvOut\n:\n2\n,\namount\n:\n341474\n,\naddress\n:\n\"tb1q8h8....mjxzny\"\n,\nprivateKey\n:\n\"0s79......ldjejke\"\n,\npublicKey\n:\n\"tb1q8h8....mjxzny\"\n,\nbip32Derivation\n:\n[\n{\n\"masterFingerprint\"\n:\n\"a22e8e32\"\n,\n\"pubkey\"\n:\n\"tb1q8h8....mjxzny\"\n,\n\"path\"\n:\n\"m/49'/0'/0'/0/0\"\n,\n}\n,\n]\n,\n}\n)\n;\n-\noptions\n-\nobject\n[\n]\n：签署 psbt 的选项\n-\nautoFinalized\n-\nboolean\n：签名后是否完成 psbt，默认为\ntrue\n-\ntoSignInputs\n-\narray：\n-\nindex\n-\nnumber\n：要签名的输入\n-\naddress\n-\nstring\n：用于签名的相应私钥所对应的地址\n-\npublicKey\n-\nstring\n：用于签名的相应私钥所对应的公钥\n-\nsighashTypes\n-\nnumber\n[\n]\n：\n(\n可选\n)\nsighashTypes\n返回值\nPromise - string[]：已签名 psbt 的十六进制字符串\n示例\ntry\n{\nlet\nres\n=\nawait\nokxwallet\n.\nfractalBitcoin\n.\nsignPsbts\n(\n[\n'70736274ff01007d...'\n,\n'70736274ff01007d...'\n,\n]\n)\n;\nconsole\n.\nlog\n(\nres\n)\n;\n}\ncatch\n(\ne\n)\n{\nconsole\n.\nlog\n(\ne\n)\n;\n}\npushPsbt\n#\nokxwallet.fractalBitcoin.pushPsbt(psbtHex)\n描述\n广播 psbt 交易\n参数\npsbtHex - string：要推送的 psbt 的十六进制字符串\n返回值\nPromise - string：交易哈希\n示例\ntry\n{\nlet\nres\n=\nawait\nokxwallet\n.\nfractalBitcoin\n.\npushPsbt\n(\n'70736274ff01007d....'\n)\n;\nconsole\n.\nlog\n(\nres\n)\n;\n}\ncatch\n(\ne\n)\n{\nconsole\n.\nlog\n(\ne\n)\n;\n}\npushTx\n#\nokxwallet.fractalBitcoin.pushTx(rawTx)\n描述\n推送交易\n参数\nrawTx - string：上链的原始交易\n返回值\nPromise - string：交易哈希\n示例\ntry\n{\nlet\ntxid\n=\nawait\nokxwallet\n.\nfractalBitcoin\n.\npushTx\n(\n'0200000000010135bd7d...'\n)\n;\nconsole\n.\nlog\n(\ntxid\n)\n;\n}\ncatch\n(\ne\n)\n{\nconsole\n.\nlog\n(\ne\n)\n;\n}",
  "html": "<div class=\"routes_md__xWlGF\"><!--$--><h1 id=\"provider-api-(fractal-bitcoin)\">Provider API (Fractal Bitcoin)<a class=\"index_header-anchor__Xqb+L\" href=\"#provider-api-(fractal-bitcoin)\" style=\"opacity:0\">#</a></h1>\n<h2 data-content=\"什么是 Injected provider API (Fractal Bitcoin) ？\" id=\"什么是-injected-provider-api-(fractal-bitcoin)-？\">什么是 Injected provider API (Fractal Bitcoin) ？<a class=\"index_header-anchor__Xqb+L\" href=\"#什么是-injected-provider-api-(fractal-bitcoin)-？\" style=\"opacity:0\">#</a></h2>\n<p>OKX Injected Providers API (Fractal Bitcoin) 基于 JavaScript 模型，由 OKX 嵌入用户访问网站中。</p>\n<p>DApp 项目可以通过调用此 API 请求用户账户信息，从用户所连接的区块链中读取数据，并协助用户进行消息和交易的签署。</p>\n<div class=\"index_wrapper__x5A2Q\"><div aria-labelledby=\":R9bf:\" class=\"okui-alert info-alert\"><i aria-hidden=\"true\" class=\"icon iconfont okui-alert-icon doc-ssr-okds-information-circle-fill\" role=\"img\"></i><div class=\"okui-alert-msg-box\"><div class=\"okui-alert-title\" id=\":R9bf:\">注：Fractal Bitcoin 仅适用于钱包插件端为 3.12.1 或更高版本。</div><div class=\"okui-alert-desc\"><div class=\"index_desc__5fNBE\"></div></div></div></div></div>\n<h2 data-content=\"connect\" id=\"connect\">connect<a class=\"index_header-anchor__Xqb+L\" href=\"#connect\" style=\"opacity:0\">#</a></h2>\n<p><strong>描述</strong></p>\n<p>连接钱包</p>\n<p><code>okxwallet.fractalBitcoin.connect()</code></p>\n<p><strong>参数</strong></p>\n<p>无</p>\n<p><strong>返回值</strong></p>\n<ul>\n<li>Promise - object<!-- -->\n<ul>\n<li>address - string：当前账户的地址</li>\n<li>publicKey - string：当前账户的公钥</li>\n</ul>\n</li>\n</ul>\n<p><strong>示例</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> okxwallet<span class=\"token punctuation\">.</span>fractalBitcoin<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// example</span>\n<span class=\"token punctuation\">{</span>\n  address<span class=\"token operator\">:</span> <span class=\"token string\">'bc1pwqye6x35g2n6xpwalywhpsvsu39k3l6086cvdgqazlw9mz2meansz9knaq'</span><span class=\"token punctuation\">,</span>\n  publicKey<span class=\"token operator\">:</span> <span class=\"token string\">'4a627f388196639041ce226c0229560127ef9a5a39d4885123cd82dc82d8b497'</span><span class=\"token punctuation\">,</span>\n  compressedPublicKey<span class=\"token operator\">:</span><span class=\"token string\">'034a627f388196639041ce226c0229560127ef9a5a39d4885123cd82dc82d8b497'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h2 data-content=\"requestAccounts\" id=\"requestaccounts\">requestAccounts<a class=\"index_header-anchor__Xqb+L\" href=\"#requestaccounts\" style=\"opacity:0\">#</a></h2>\n<p><code>okxwallet.fractalBitcoin.requestAccounts()</code></p>\n<p><strong>描述</strong></p>\n<p>请求连接当前账户</p>\n<p><strong>参数</strong></p>\n<p>无</p>\n<p><strong>返回值</strong></p>\n<ul>\n<li>Promise - string[]：当前账户的地址</li>\n</ul>\n<p><strong>示例</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> accounts <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> okxwallet<span class=\"token punctuation\">.</span>fractalBitcoin<span class=\"token punctuation\">.</span><span class=\"token function\">requestAccounts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'connect success'</span><span class=\"token punctuation\">,</span> accounts<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'connect failed'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// example</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'tb1qrn7tvhdf6wnh790384ahj56u0xaa0kqgautnnz'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h2 data-content=\"getAccounts\" id=\"getaccounts\">getAccounts<a class=\"index_header-anchor__Xqb+L\" href=\"#getaccounts\" style=\"opacity:0\">#</a></h2>\n<p><code>okxwallet.fractalBitcoin.getAccounts()</code></p>\n<p><strong>描述</strong></p>\n<p>获取当前账户地址</p>\n<p><strong>参数</strong></p>\n<p>无</p>\n<p><strong>返回值</strong></p>\n<ul>\n<li>Promise - string[]：当前账户地址</li>\n</ul>\n<p><strong>示例</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> okxwallet<span class=\"token punctuation\">.</span>fractalBitcoin<span class=\"token punctuation\">.</span><span class=\"token function\">getAccounts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// example</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'tb1qrn7tvhdf6wnh790384ahj56u0xaa0kqgautnnz'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h2 data-content=\"getPublicKey\" id=\"getpublickey\">getPublicKey<a class=\"index_header-anchor__Xqb+L\" href=\"#getpublickey\" style=\"opacity:0\">#</a></h2>\n<p><code>okxwallet.fractalBitcoin.getPublicKey()</code></p>\n<p><strong>描述</strong></p>\n<p>获取当前账户的公钥</p>\n<p><strong>参数</strong></p>\n<p>无</p>\n<p><strong>返回值</strong></p>\n<ul>\n<li>Promise - string：公钥</li>\n</ul>\n<p><strong>示例</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> okxwallet<span class=\"token punctuation\">.</span>fractalBitcoin<span class=\"token punctuation\">.</span><span class=\"token function\">getPublicKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// example</span>\n03cbaedc26f03fd3ba02fc936f338e980c9e2172c5e23128877ed46827e935296f\n</code></pre></div>\n<h2 data-content=\"getBalance\" id=\"getbalance\">getBalance<a class=\"index_header-anchor__Xqb+L\" href=\"#getbalance\" style=\"opacity:0\">#</a></h2>\n<p><code>okxwallet.fractalBitcoin.getBalance()</code></p>\n<p><strong>描述</strong></p>\n<p>获取 BTC 余额</p>\n<p><strong>参数</strong></p>\n<p>无</p>\n<p><strong>返回值</strong></p>\n<ul>\n<li>Promise - object：<!-- -->\n<ul>\n<li>confirmed - number：已确认的聪数量</li>\n<li>unconfirmed - number：未经确认的聪数量</li>\n<li>total - number：总聪量</li>\n</ul>\n</li>\n</ul>\n<p>示例</p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> okxwallet<span class=\"token punctuation\">.</span>fractalBitcoin<span class=\"token punctuation\">.</span><span class=\"token function\">getBalance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// example</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token string-property property\">\"confirmed\"</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"unconfirmed\"</span><span class=\"token operator\">:</span><span class=\"token number\">100000</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"total\"</span><span class=\"token operator\">:</span><span class=\"token number\">100000</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h2 data-content=\"signMessage\" id=\"signmessage\">signMessage<a class=\"index_header-anchor__Xqb+L\" href=\"#signmessage\" style=\"opacity:0\">#</a></h2>\n<p><code>okxwallet.fractalBitcoin.signMessage(signStr[, type])</code></p>\n<p><strong>描述</strong></p>\n<p>签名消息</p>\n<p><strong>参数</strong></p>\n<ul>\n<li>signStr - string：需要签名的数据</li>\n<li>type - string： (可选) \"ecdsa\" | \"bip322-simple\"，默认值是 \"ecdsa\"。(请注意：版本低于 6.51.0 的应用仅支持“ecdsa”签名算法，而版本为 6.51.0 或更高的应用可支持所有签名算法类型。)</li>\n</ul>\n<p><strong>返回值</strong></p>\n<ul>\n<li>Promise - string：签名结果</li>\n</ul>\n<p><strong>示例</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> signStr <span class=\"token operator\">=</span> <span class=\"token string\">'need sign string'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> window<span class=\"token punctuation\">.</span>okxwallet<span class=\"token punctuation\">.</span>fractalBitcoin<span class=\"token punctuation\">.</span><span class=\"token function\">signMessage</span><span class=\"token punctuation\">(</span>signStr<span class=\"token punctuation\">,</span> <span class=\"token string\">'ecdsa'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// example</span>\nINg2ZeG8b6GsiYLiWeQQpvmfFHqCt3zC6ocdlN9ZRQLhSFZdGhgYWF8ipar1wqJtYufxzSYiZm5kdlAcnxgZWQU<span class=\"token operator\">=</span>\n</code></pre></div>\n<h2 data-content=\"signPsbt\" id=\"signpsbt\">signPsbt<a class=\"index_header-anchor__Xqb+L\" href=\"#signpsbt\" style=\"opacity:0\">#</a></h2>\n<p><code>okxwallet.fractalBitcoin.signPsbt(psbtHex[, options])</code></p>\n<p><strong>描述</strong></p>\n<p>签名 psbt，该方法将遍历所有与当前地址匹配的输入进行签名</p>\n<p><strong>参数</strong></p>\n<ul>\n<li>psbtHex - string：要签名的 psbt 的十六进制字符串</li>\n</ul>\n<div class=\"index_wrapper__x5A2Q\"><div aria-labelledby=\":R4fbf:\" class=\"okui-alert info-alert\"><i aria-hidden=\"true\" class=\"icon iconfont okui-alert-icon doc-ssr-okds-information-circle-fill\" role=\"img\"></i><div class=\"okui-alert-msg-box\"><div class=\"okui-alert-title\" id=\":R4fbf:\">注：构建交易生成 psbt (string 类型)，如果遇到 input 地址是 Taproot 类型，需要提供公钥。</div><div class=\"okui-alert-desc\"><div class=\"index_desc__5fNBE\"></div></div></div></div></div>\n<p><strong>示例：可参考下面的 txInput 和 publicKey</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> txInputs<span class=\"token operator\">:</span> utxoInput<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\ntxInputs<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      txId<span class=\"token operator\">:</span> <span class=\"token string\">\"1e0f92720ef34ab75eefc5d691b551fb2f783eac61503a69cdf63eb7305d2306\"</span><span class=\"token punctuation\">,</span>\n      vOut<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n      amount<span class=\"token operator\">:</span> <span class=\"token number\">341474</span><span class=\"token punctuation\">,</span>\n      address<span class=\"token operator\">:</span> <span class=\"token string\">\"tb1q8h8....mjxzny\"</span><span class=\"token punctuation\">,</span>\n      privateKey<span class=\"token operator\">:</span> <span class=\"token string\">\"0s79......ldjejke\"</span><span class=\"token punctuation\">,</span>\n      publicKey<span class=\"token operator\">:</span> <span class=\"token string\">\"tb1q8h8....mjxzny\"</span><span class=\"token punctuation\">,</span>\n      bip32Derivation<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span><span class=\"token string-property property\">\"masterFingerprint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"a22e8e32\"</span><span class=\"token punctuation\">,</span><span class=\"token string-property property\">\"pubkey\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tb1q8h8....mjxzny\"</span><span class=\"token punctuation\">,</span><span class=\"token string-property property\">\"path\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"m/49'/0'/0'/0/0\"</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">-</span> options\n  <span class=\"token operator\">-</span> autoFinalized <span class=\"token operator\">-</span> <span class=\"token builtin\">boolean</span>：签名后是否完成 psbt，默认为 <span class=\"token boolean\">true</span>\n  <span class=\"token operator\">-</span> toSignInputs <span class=\"token operator\">-</span> array：\n    <span class=\"token operator\">-</span> index <span class=\"token operator\">-</span> <span class=\"token builtin\">number</span>：要签名的输入\n    <span class=\"token operator\">-</span> address <span class=\"token operator\">-</span> <span class=\"token builtin\">string</span>：用于签名的相应私钥所对应的地址\n    <span class=\"token operator\">-</span> publicKey <span class=\"token operator\">-</span> <span class=\"token builtin\">string</span>：用于签名的相应私钥所对应的公钥\n    <span class=\"token operator\">-</span> sighashTypes <span class=\"token operator\">-</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token function\">：</span> <span class=\"token punctuation\">(</span>可选<span class=\"token punctuation\">)</span> sighashTypes\n    <span class=\"token operator\">-</span> disableTweakSigner <span class=\"token operator\">-</span> <span class=\"token function\">boolean：</span> <span class=\"token punctuation\">(</span>可选<span class=\"token punctuation\">)</span> 签名和解锁 Taproot 地址时， 默认使用 tweakSigner 来生成签名，启用此选项允许使用原始私钥进行签名\n\n</code></pre></div>\n<p><strong>返回值</strong></p>\n<ul>\n<li>Promise - string：已签名 psbt 的十六进制字符串</li>\n</ul>\n<p><strong>示例</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span><span class=\"token keyword\">let</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> okxwallet<span class=\"token punctuation\">.</span>fractalBitcoin<span class=\"token punctuation\">.</span><span class=\"token function\">signPsbt</span><span class=\"token punctuation\">(</span><span class=\"token string\">'70736274ff01007d....'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    autoFinalized<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    toSignInputs<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n        index<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n        address<span class=\"token operator\">:</span> <span class=\"token string\">'tb1q8h8....mjxzny'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">{</span>\n        index<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        publicKey<span class=\"token operator\">:</span> <span class=\"token string\">'tb1q8h8....mjxzny'</span><span class=\"token punctuation\">,</span>\n        sighashTypes<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">{</span>\n        index<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n        publicKey<span class=\"token operator\">:</span> <span class=\"token string\">'02062...8779693f'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span>\n\n\nokxwallet<span class=\"token punctuation\">.</span>fractalBitcoin<span class=\"token punctuation\">.</span><span class=\"token function\">signPsbt</span><span class=\"token punctuation\">(</span><span class=\"token string\">'xxxxxxxx'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  toSignInputs<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> index<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> publicKey<span class=\"token operator\">:</span> <span class=\"token string\">'xxxxxx'</span><span class=\"token punctuation\">,</span> disableTweakSigner<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  autoFinalized<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h2 data-content=\"signPsbts\" id=\"signpsbts\">signPsbts<a class=\"index_header-anchor__Xqb+L\" href=\"#signpsbts\" style=\"opacity:0\">#</a></h2>\n<p><code>okxwallet.fractalBitcoin.signPsbts(psbtHexs[, options])</code></p>\n<p><strong>描述</strong></p>\n<p>签署多个 psbt，该方法将遍历所有与当前地址匹配的输入进行签名</p>\n<p><strong>参数</strong></p>\n<ul>\n<li>psbtHexs - string[]：要签名的 psbt 的十六进制字符串</li>\n</ul>\n<div class=\"index_wrapper__x5A2Q\"><div aria-labelledby=\":R59bf:\" class=\"okui-alert info-alert\"><i aria-hidden=\"true\" class=\"icon iconfont okui-alert-icon doc-ssr-okds-information-circle-fill\" role=\"img\"></i><div class=\"okui-alert-msg-box\"><div class=\"okui-alert-title\" id=\":R59bf:\">注：构建交易生成 psbt (string 类型)，如果遇到 input 地址是 Taproot 类型，需要提供公钥。</div><div class=\"okui-alert-desc\"><div class=\"index_desc__5fNBE\"></div></div></div></div></div>\n<p><strong>示例：可参考下面的 txInput 和 publicKey</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> txInputs<span class=\"token operator\">:</span> utxoInput<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\ntxInputs<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      txId<span class=\"token operator\">:</span> <span class=\"token string\">\"1e0f92720ef34ab75eefc5d691b551fb2f783eac61503a69cdf63eb7305d2306\"</span><span class=\"token punctuation\">,</span>\n      vOut<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n      amount<span class=\"token operator\">:</span> <span class=\"token number\">341474</span><span class=\"token punctuation\">,</span>\n      address<span class=\"token operator\">:</span> <span class=\"token string\">\"tb1q8h8....mjxzny\"</span><span class=\"token punctuation\">,</span>\n      privateKey<span class=\"token operator\">:</span> <span class=\"token string\">\"0s79......ldjejke\"</span><span class=\"token punctuation\">,</span>\n      publicKey<span class=\"token operator\">:</span> <span class=\"token string\">\"tb1q8h8....mjxzny\"</span><span class=\"token punctuation\">,</span>\n      bip32Derivation<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span><span class=\"token string-property property\">\"masterFingerprint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"a22e8e32\"</span><span class=\"token punctuation\">,</span><span class=\"token string-property property\">\"pubkey\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tb1q8h8....mjxzny\"</span><span class=\"token punctuation\">,</span><span class=\"token string-property property\">\"path\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"m/49'/0'/0'/0/0\"</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">-</span> options <span class=\"token operator\">-</span> object<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>：签署 psbt 的选项\n  <span class=\"token operator\">-</span> autoFinalized <span class=\"token operator\">-</span> <span class=\"token builtin\">boolean</span>：签名后是否完成 psbt，默认为 <span class=\"token boolean\">true</span>\n  <span class=\"token operator\">-</span> toSignInputs <span class=\"token operator\">-</span> array：\n    <span class=\"token operator\">-</span> index <span class=\"token operator\">-</span> <span class=\"token builtin\">number</span>：要签名的输入\n    <span class=\"token operator\">-</span> address <span class=\"token operator\">-</span> <span class=\"token builtin\">string</span>：用于签名的相应私钥所对应的地址\n    <span class=\"token operator\">-</span> publicKey <span class=\"token operator\">-</span> <span class=\"token builtin\">string</span>：用于签名的相应私钥所对应的公钥\n    <span class=\"token operator\">-</span> sighashTypes <span class=\"token operator\">-</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token function\">：</span> <span class=\"token punctuation\">(</span>可选<span class=\"token punctuation\">)</span> sighashTypes\n</code></pre></div>\n<p><strong>返回值</strong></p>\n<ul>\n<li>Promise - string[]：已签名 psbt 的十六进制字符串</li>\n</ul>\n<p><strong>示例</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> okxwallet<span class=\"token punctuation\">.</span>fractalBitcoin<span class=\"token punctuation\">.</span><span class=\"token function\">signPsbts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'70736274ff01007d...'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'70736274ff01007d...'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h2 data-content=\"pushPsbt\" id=\"pushpsbt\">pushPsbt<a class=\"index_header-anchor__Xqb+L\" href=\"#pushpsbt\" style=\"opacity:0\">#</a></h2>\n<p><code>okxwallet.fractalBitcoin.pushPsbt(psbtHex)</code></p>\n<p><strong>描述</strong></p>\n<p>广播 psbt 交易</p>\n<p><strong>参数</strong></p>\n<ul>\n<li>psbtHex - string：要推送的 psbt 的十六进制字符串</li>\n</ul>\n<p><strong>返回值</strong></p>\n<ul>\n<li>Promise - string：交易哈希</li>\n</ul>\n<p><strong>示例</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> okxwallet<span class=\"token punctuation\">.</span>fractalBitcoin<span class=\"token punctuation\">.</span><span class=\"token function\">pushPsbt</span><span class=\"token punctuation\">(</span><span class=\"token string\">'70736274ff01007d....'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h2 data-content=\"pushTx\" id=\"pushtx\">pushTx<a class=\"index_header-anchor__Xqb+L\" href=\"#pushtx\" style=\"opacity:0\">#</a></h2>\n<p><code>okxwallet.fractalBitcoin.pushTx(rawTx)</code></p>\n<p><strong>描述</strong></p>\n<p>推送交易</p>\n<p><strong>参数</strong></p>\n<ul>\n<li>rawTx - string：上链的原始交易</li>\n</ul>\n<p><strong>返回值</strong></p>\n<ul>\n<li>Promise - string：交易哈希</li>\n</ul>\n<p><strong>示例</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> txid <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> okxwallet<span class=\"token punctuation\">.</span>fractalBitcoin<span class=\"token punctuation\">.</span><span class=\"token function\">pushTx</span><span class=\"token punctuation\">(</span><span class=\"token string\">'0200000000010135bd7d...'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>txid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div><!--/$--></div>",
  "url": "https://web3.okx.com/zh-hans/build/dev-docs/sdks/chains/bitcoin/provider-fractal#pushpsbt",
  "navigation": {
    "breadcrumbs": [
      "DApp 连接钱包",
      "Bitcoin",
      "Provider API (Fractal Bitcoin)"
    ],
    "sidebar_links": [
      "什么是连接钱包",
      "支持的网络",
      "接入前提",
      "EVM 兼容链",
      "Bitcoin 兼容链",
      "Solana 兼容链",
      "TON",
      "SUI",
      "Aptos/Movement",
      "Cosmos 系/Sei",
      "Tron",
      "Starknet",
      "常见问题",
      "接入前提",
      "EVM 兼容链",
      "Bitcoin 兼容链",
      "Provider API",
      "Provider API (Fractal Bitcoin)",
      "Provider API (Testnet)",
      "Provider API (Signet)"
    ],
    "toc": [
      "什么是 Injected provider API (Fractal Bitcoin) ？",
      "connect",
      "requestAccounts",
      "getAccounts",
      "getPublicKey",
      "getBalance",
      "signMessage",
      "signPsbt",
      "signPsbts",
      "pushPsbt",
      "pushTx"
    ]
  },
  "word_count": 915,
  "extract_time": "2025-05-27 07:24:39"
}