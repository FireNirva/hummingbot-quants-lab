{
  "title": "UI | Cosmos | 连接App或Mini钱包 | 接入 Web3 钱包 | DEX API 文档 | 欧易",
  "text": "UI\n#\n安装及初始化\n#\n请确保更新OKX App到 6.94.0版本或以后版本，即可开始接入：\n将 OKX Connect 集成到您的 DApp 中，可以使用 npm:\nnpm install @okxconnect/ui\nnpm install @okxconnect/universal-provider\n连接钱包之前，需要先创建一个可以提供UI界面的对象，用于后续连接钱包、发送交易等操作。\nOKXUniversalConnectUI.init(dappMetaData, actionsConfiguration, uiPreferences, language)\n请求参数\ndappMetaData - object\nname - string: 应用名称，不会作为唯一表示\nicon - string: 应用图标的 URL。必须是 PNG、ICO 等格式，不支持 SVG 图标。最好传递指向 180x180px PNG 图标的 url。\nactionsConfiguration - object\nmodals - ('before' | 'success' | 'error')[] | 'all' 交易过程中的提醒界面展示模式，默认为'before'\nreturnStrategy -string 'none' |\n${string}://${string}\n; 针对app 钱包，指定当用户签署/拒绝请求时深层链接的返回策略，如果是在telegram中，可以配置tg://resolve\ntmaReturnUrl -string 'back' | 'none' |\n${string}://${string}\n; Telegram Mini Wallet 钱包中，用户签署/拒绝请求时深层链接的返回策略，一般配置back,表示签名后关闭钱包，会自动展示出dapp；none 表示签名后不做处理；默认为back；\nuiPreferences -object\ntheme - Theme 可以是：THEME.DARK, THEME.LIGHT, \"SYSTEM\"\nlanguage - \"en_US\" | \"ru_RU\" | \"zh_CN\" | \"ar_AE\" | \"cs_CZ\" | \"de_DE\" | \"es_ES\" | \"es_LAT\" | \"fr_FR\" | \"id_ID\" | \"it_IT\" | \"nl_NL\" | \"pl_PL\" | \"pt_BR\" | \"pt_PT\" | \"ro_RO\" | \"tr_TR\" | \"uk_UA\" | \"vi_VN\";\n, 默认为en_US\n返回值\nOKXUniversalConnectUI\n示例\nimport\n{\nOKXUniversalConnectUI\n}\nfrom\n\"@okxconnect/ui\"\n;\nconst\nokxUniversalConnectUI\n=\nawait\nOKXUniversalConnectUI\n.\ninit\n(\n{\ndappMetaData\n:\n{\nicon\n:\n\"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png\"\n,\nname\n:\n\"OKX Connect Demo\"\n}\n,\nactionsConfiguration\n:\n{\nreturnStrategy\n:\n'tg://resolve'\n,\nmodals\n:\n\"all\"\n,\ntmaReturnUrl\n:\n'back'\n}\n,\nlanguage\n:\n\"en_US\"\n,\nuiPreferences\n:\n{\ntheme\n:\nTHEME\n.\nLIGHT\n}\n,\n}\n)\n;\n连接钱包\n#\n连接钱包去获取钱包地址，作为标识符和用于签名交易的必要参数;\nokxUniversalConnectUI.connect(connectParams: ConnectParams)\n请求参数\nconnectParams - ConnectParams\nnamespaces - [namespace: string]: ConnectNamespace ; 请求连接的可选信息， EVM系的key为\"eip155\"，COSMOS系的key为\"cosmos\"，如果请求的链中，有任何一个链钱包不支持的话，钱包会拒绝连接；\nchains: string[]; 链id信息,\ndefaultChain?: string; 默认链\noptionalNamespaces - [namespace: string]: ConnectNamespace; 请求连接的可选信息， EVM系的key为\"eip155\"，COSMOS系的key为\"cosmos\"，如果对应的链信息钱包不支持，依然可以连接；\nchains: string[]; 链id信息,\ndefaultChain?: string; 默认链\nsessionConfig: object\nredirect: string 连接成功后的跳转参数，如果是Telegram中的Mini App，这里可以设置为Telegram的deeplink: \"tg://resolve\"\n返回值\nPromise\n<SessionTypes.Struct | undefined>\ntopic: string; 会话标识；\nnamespaces:\nRecord<string, Namespace>\n; 成功连接的namespace 信息；\nchains: string[]; 连接的链信息；\naccounts: string[]; 连接的账户信息；\nmethods: string[]; 当前namespace下，钱包支持的方法；\ndefaultChain?: string; 当前会话的默认链\nsessionConfig?: SessionConfig\ndappInfo: object DApp 信息；\nname:string\nicon:string\nredirect?:string, 连接成功后的跳转参数；\n示例\nvar\nsession\n=\nawait\nokxUniversalConnectUI\n.\nconnect\n(\n{\nnamespaces\n:\n{\ncosmos\n:\n{\nchains\n:\n[\n\"cosmos:cosmoshub-4\"\n,\n// \"cosmos:osmosis-1\"\n]\n,\n}\n}\n,\nsessionConfig\n:\n{\nredirect\n:\n\"tg://resolve\"\n}\n}\n)\n连接钱包并签名\n#\n连接钱包获取钱包地址，并对数据进行签名；签名结果会在\"connect_signResponse\"的event中回调；\nawait okxUniversalConnectUI.openModalAndSign(connectParams: ConnectParams, signRequest: RequestParams[])\n请求参数\nconnectParams - ConnectParams\nnamespaces - [namespace: string]: ConnectNamespace ; 请求连接的可选信息，COSMOS系的key为\"cosmos\"，如果请求的链中，有任何一个链钱包不支持的话，钱包会拒绝连接；\nchains: string[]; 链id信息,\ndefaultChain?: string; 默认链\noptionalNamespaces - [namespace: string]: ConnectNamespace; 请求连接的可选信息，COSMOS系的key为\"cosmos\"，如果对应的链信息钱包不支持，依然可以连接；\nchains: string[]; 链id信息,\ndefaultChain?: string; 默认链\nsessionConfig: object\nredirect: string 连接成功后的跳转参数，如果是Telegram中的Mini App，这里可以设置为Telegram的deeplink: \"tg://resolve\"\nsignRequest - RequestParams[]; 请求连接并签名的方法, 同时最多只能支持一个方法；\nmethod: string; 请求的方法名称, COSMOS系支持的方法有: \"cosmos_signArbitrary\"；\nchainId: string; 执行方法所在的链的ID, 该chainId必须包含在上面的namespaces中；\nparams: unknown[] | Record\n<string, unknown>\n| object | undefined; 请求的方法对应的参数；\n返回值\nPromise\n<SessionTypes.Struct | undefined>\ntopic: string; 会话标识；\nnamespaces:\nRecord<string, Namespace>\n; 成功连接的namespace 信息；\nchains: string[]; 连接的链信息；\naccounts: string[]; 连接的账户信息；\nmethods: string[]; 当前namespace下，钱包支持的方法；\ndefaultChain?: string; 当前会话的默认链\nsessionConfig?: SessionConfig\ndappInfo: object DApp 信息；\nname:string\nicon:string\n示例\n// 先添加签名结果监听\nokxUniversalConnectUI\n.\non\n(\n\"connect_signResponse\"\n,\n(\nsignResponse\n)\n=>\n{\nconsole\n.\nlog\n(\nsignResponse\n)\n;\n}\n)\n;\nvar\nsession\n=\nawait\nokxUniversalConnectUI\n.\nopenModalAndSign\n(\n{\nnamespaces\n:\n{\ncosmos\n:\n{\nchains\n:\n[\n\"cosmos:cosmoshub-4\"\n,\n// \"cosmos:osmosis-1\"\n]\n,\n}\n}\n,\nsessionConfig\n:\n{\nredirect\n:\n\"tg://resolve\"\n}\n}\n,\n[\n{\nchainId\n:\n\"cosmos:cosmoshub-4\"\n,\nmethod\n:\n\"cosmos_signArbitrary\"\n,\nparams\n:\n{\nmessage\n:\n\"Hello Cosmos\"\n}\n}\n]\n)\n判断钱包是否已连接\n#\n获取当前是否有连接钱包;\n返回值\nboolean\n示例\nokxUniversalConnectUI\n.\nconnected\n(\n)\n准备交易\n#\n首先创建一个OKXCosmosProvider对象，构造函数传入okxUniversalConnectUI\nimport\n{\nOKXCosmosProvider\n}\nfrom\n\"@okxconnect/universal-provider\"\n;\nlet\nokxCosmosProvider\n=\nnew\nOKXCosmosProvider\n(\nokxUniversalConnectUI\n)\n获取账户信息\n#\nokxCosmosProvider.getAccount(chainId)\n请求参数\nchainId: 请求的链，如cosmos:cosmoshub-4, cosmos:osmosis-1\n返回值\nObject\nalgo: \"secp256k1\",\naddress: string 钱包地址,\nbech32Address: string 钱包地址,\npubKey: Uint8Array 公钥,\n示例\nlet\nresult\n=\nokxCosmosProvider\n.\ngetAccount\n(\n\"cosmos:cosmoshub-4\"\n)\n//返回结构\n{\n\"algo\"\n:\n\"secp256k1\"\n,\n\"address\"\n:\n\"cosmos1u6lts9ng4etxj0zdaxsada6zgl8dudpg3ygvjw\"\n,\n\"bech32Address\"\n:\n\"cosmos1u6lts9ng4etxj0zdaxsada6zgl8dudpg3ygvjw\"\n,\n\"pubKey\"\n:\nUnit8Aray\n,\n}\n签署消息\n#\nokxCosmosProvider.signArbitrary(chain, signerAddress, message)\n请求参数\nchain - string, 请求执行方法的链\nsignerAddress - string 签名钱包地址\nmessage - string 需要签名的消息。\n返回值\nPromise - object\npub_key : object\ntype:string 公钥类型\nvalue:string 公钥\nsignature: string 签名结果\n示例\nlet\nchain\n=\n\"cosmos:cosmoshub-4\"\nlet\nsignStr\n=\n\"data need to sign ...\"\nlet\nresult\n=\nokxCosmosProvider\n.\nsignArbitrary\n(\nchain\n,\nsignStr\n)\n//返回结构: {\"pub_key\":{\"type\":\"tendermint/PubKeySecp256k1\",\"value\":\"AkRuGelKwOg+qJbScSUHV36zn73S1q6fD8C5dZ8furqQ\"},\"signature\":\"YSyndEFlHYTWpSXsn28oolZpKim/BnmCVD0hZfvPQHQV3Bc0B0EU77CKE6LpV+PUJn19d1skAQy/bXyzppnuxw==\"}\n签署交易 signAmino\n#\nokxCosmosProvider.signAmino(chainId: string, signerAddress: string, signDoc: StdSignDoc, signOptions?: object)\n请求参数\nchainId - string, 请求签名执行的链，必传参数\nsignerAddress - string,钱包地址\nsignDoc - object，交易信息 按照固定格式签名，类似 cosmjs 的 OfflineSigner 的 signAmino 方法 参数就是对象，signDoc 就是一个固定格式\n返回值\nPromise - Object\nsigned - object,交易信息\nsignature -object,签名结果\n示例\nlet\nsignDoc\n=\n{\n\"chain_id\"\n:\n\"osmosis-1\"\n,\n\"account_number\"\n:\n\"630104\"\n,\n\"sequence\"\n:\n\"480\"\n,\n\"fee\"\n:\n{\n\"gas\"\n:\n\"683300\"\n,\n\"amount\"\n:\n[\n{\n\"denom\"\n:\n\"uosmo\"\n,\n\"amount\"\n:\n\"2818\"\n}\n]\n}\n,\n\"msgs\"\n:\n[\n{\n\"type\"\n:\n\"osmosis/poolmanager/swap-exact-amount-in\"\n,\n\"value\"\n:\n{\n\"sender\"\n:\n\"osmo1u6lts9ng4etxj0zdaxsada6zgl8dudpgelmuyu\"\n,\n\"routes\"\n:\n[\n{\n\"pool_id\"\n:\n\"1096\"\n,\n\"token_out_denom\"\n:\n\"ibc/987C17B11ABC2B20019178ACE62929FE9840202CE79498E29FE8E5CB02B7C0A4\"\n}\n,\n{\n\"pool_id\"\n:\n\"611\"\n,\n\"token_out_denom\"\n:\n\"ibc/27394FB092D2ECCD56123C74F36E4C1F926001CEADA9CA97EA622B25F41E5EB2\"\n}\n]\n,\n\"token_in\"\n:\n{\n\"denom\"\n:\n\"uosmo\"\n,\n\"amount\"\n:\n\"100\"\n}\n,\n\"token_out_min_amount\"\n:\n\"8\"\n}\n}\n]\n,\n\"memo\"\n:\n\"FE\"\n,\n\"timeout_height\"\n:\n\"23603788\"\n,\n\"signOptions\"\n:\n{\n\"useOneClickTrading\"\n:\nfalse\n,\n\"preferNoSetFee\"\n:\ntrue\n,\n\"fee\"\n:\n{\n\"gas\"\n:\n\"683300\"\n,\n\"amount\"\n:\n[\n{\n\"denom\"\n:\n\"uosmo\"\n,\n\"amount\"\n:\n\"2818\"\n}\n]\n}\n}\n}\nlet\nres\n=\nawait\nprovider\n.\nsignAmino\n(\n\"cosmos:osmosis-1\"\n,\nprovider\n.\ngetAccount\n(\n\"cosmos:osmosis-1\"\n)\n.\naddress\n,\nsignDoc\n)\n/**\n 返回结构:\n{\n\"signed\":\n{\n\"chain_id\": \"osmosis-1\",\n \"account_number\": \"630104\",\n \"sequence\": \"480\",\n \"fee\":\n{\n\"amount\": [\n{\n\"amount\": \"12500\",\n \"denom\": \"uosmo\"\n}\n],\n \"gas\": \"500000\"\n}\n,\n \"msgs\": [\n{\n\"type\": \"osmosis/poolmanager/swap-exact-amount-in\",\n \"value\":\n{\n\"sender\": \"osmo1u6lts9ng4etxj0zdaxsada6zgl8dudpgelmuyu\",\n \"routes\": [\n{\n\"pool_id\": \"1096\",\n \"token_out_denom\": \"ibc/987C17B11ABC2B20019178ACE62929FE9840202CE79498E29FE8E5CB02B7C0A4\"\n}\n,\n{\n\"pool_id\": \"611\",\n \"token_out_denom\": \"ibc/27394FB092D2ECCD56123C74F36E4C1F926001CEADA9CA97EA622B25F41E5EB2\"\n}\n],\n \"token_in\":\n{\n\"denom\": \"uosmo\",\n \"amount\": \"100\"\n}\n,\n \"token_out_min_amount\": \"8\"\n}\n}\n],\n \"memo\": \"FE\",\n \"timeout_height\": \"23603788\",\n \"signOptions\":\n{\n\"useOneClickTrading\": false,\n \"preferNoSetFee\": true,\n \"fee\":\n{\n\"gas\": \"683300\",\n \"amount\": [\n{\n\"denom\": \"uosmo\",\n \"amount\": \"2818\"\n}\n]\n}\n}\n}\n,\n \"signature\":\n{\n\"pub_key\":\n{\n\"type\": \"tendermint/PubKeySecp256k1\",\n \"value\": \"AkRuGelKwOg+qJbScSUHV36zn73S1q6fD8C5dZ8furqQ\"\n}\n,\n \"signature\": \"2Brt/w+1U3C+tIbsI//pv9zTYca9WlBd1eKm/Gde5MFaRagmxtsn6h2beP7+4R4MDav7r1G+0Nxd5arB0qVfUw==\"\n}\n}\n*/\n签署交易 signDirect\n#\nokxCosmosProvider.signDirect(chainId, signerAddress, signDoc, signOptions?)\n请求参数\nchainId - string, 请求签名执行的链，必传参数，\nsignerAddress - string, 钱包地址\nsignDoc - object 交易数据\nbodyBytes ,Uint8Array\nauthInfoBytes, Uint8Array\nchainId, string\naccountNumber, string\n返回值\nPromise - Object\nsigned - object,交易信息\nsignature -object,签名结果\n示例\nlet\nsignDoc\n=\n{\n\"bodyBytes\"\n:\nUint8Array\n,\n\"authInfoBytes\"\n:\nUint8Array\n,\n\"chainId\"\n:\n\"osmosis-1\"\n,\n\"accountNumber\"\n:\n\"630104\"\n,\n}\nlet\nres\n=\nawait\nprovider\n.\nsignDirect\n(\n\"cosmos:osmosis-1\"\n,\nprovider\n.\ngetAccount\n(\n\"cosmos:osmosis-1\"\n)\n.\naddress\n,\nsignDoc\n)\n/**\n{\n\"signed\":\n{\n\"bodyBytes\": Uint8Array,\n \"authInfoBytes\":Uint8Array ,\n \"chainId\": \"osmosis-1\",\n \"accountNumber\": \"630104\"\n}\n,\n \"signature\":\n{\n\"pub_key\":\n{\n\"type\": \"tendermint/PubKeySecp256k1\",\n \"value\": \"AkRuGelKwOg+qJbScSUHV36zn73S1q6fD8C5dZ8furqQ\"\n}\n,\n \"signature\": \"YpX2kGmbZYVxUqK8y9OCweJNgZkS4WaS79nBDfOJaTgowPfY0gSbXSQeRLlif2SIkBqcwTNSItBqb5M7a6K30g==\"\n}\n}\n*/\n断开钱包连接\n#\n断开已连接钱包,并删除当前会话,如果要切换连接钱包,请先断开当前钱包。\nokxUniversalConnectUI\n.\ndisconnect\n(\n)\nEvent事件\n#\n// 生成 universalLink\nokxUniversalConnectUI\n.\non\n(\n\"display_uri\"\n,\n(\nuri\n)\n=>\n{\nconsole\n.\nlog\n(\nuri\n)\n;\n}\n)\n;\n// session 信息变更会触发该事件；\nokxUniversalConnectUI\n.\non\n(\n\"session_update\"\n,\n(\nsession\n)\n=>\n{\nconsole\n.\nlog\n(\nJSON\n.\nstringify\n(\nsession\n)\n)\n;\n}\n)\n;\n// 断开连接会触发该事件；\nokxUniversalConnectUI\n.\non\n(\n\"session_delete\"\n,\n(\n{\ntopic\n}\n)\n=>\n{\nconsole\n.\nlog\n(\ntopic\n)\n;\n}\n)\n;\n// 连接并签名时,签名结果会触发该事件;\nokxUniversalConnectUI\n.\non\n(\n\"connect_signResponse\"\n,\n(\nsignResponse\n)\n=>\n{\nconsole\n.\nlog\n(\nsignResponse\n)\n;\n}\n)\n;\n错误码\n#\n在连接，交易，断开连接的过程中可能抛出的异常;\n异常\n错误码\n描述\nOKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR\n未知异常\nOKX_CONNECT_ERROR_CODES.ALREADY_CONNECTED_ERROR\n钱包已连接\nOKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR\n钱包未连接\nOKX_CONNECT_ERROR_CODES.USER_REJECTS_ERROR\n用户拒绝\nOKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED\n方法不支持\nOKX_CONNECT_ERROR_CODES.CHAIN_NOT_SUPPORTED\n链不支持\nOKX_CONNECT_ERROR_CODES.WALLET_NOT_SUPPORTED\n钱包不支持\nOKX_CONNECT_ERROR_CODES.CONNECTION_ERROR\n连接异常\nexport\nenum\nOKX_CONNECT_ERROR_CODES\n{\nUNKNOWN_ERROR\n=\n0\n,\nALREADY_CONNECTED_ERROR\n=\n11\n,\nNOT_CONNECTED_ERROR\n=\n12\n,\nUSER_REJECTS_ERROR\n=\n300\n,\nMETHOD_NOT_SUPPORTED\n=\n400\n,\nCHAIN_NOT_SUPPORTED\n=\n500\n,\nWALLET_NOT_SUPPORTED\n=\n600\n,\nCONNECTION_ERROR\n=\n700\n}",
  "html": "<div class=\"routes_md__xWlGF\"><!--$--><h1 id=\"ui\">UI<a class=\"index_header-anchor__Xqb+L\" href=\"#ui\" style=\"opacity:0\">#</a></h1>\n<h2 data-content=\"安装及初始化\" id=\"安装及初始化\">安装及初始化<a class=\"index_header-anchor__Xqb+L\" href=\"#安装及初始化\" style=\"opacity:0\">#</a></h2>\n<p>请确保更新OKX App到 6.94.0版本或以后版本，即可开始接入：</p>\n<p>将 OKX Connect 集成到您的 DApp 中，可以使用 npm:</p>\n<div class=\"remark-highlight\"><pre class=\"language-unknown\"><code class=\"language-unknown\">npm install @okxconnect/ui\nnpm install @okxconnect/universal-provider</code></pre></div>\n<p>连接钱包之前，需要先创建一个可以提供UI界面的对象，用于后续连接钱包、发送交易等操作。</p>\n<div class=\"remark-highlight\"><pre class=\"language-unknown\"><code class=\"language-unknown\">OKXUniversalConnectUI.init(dappMetaData, actionsConfiguration, uiPreferences, language)</code></pre></div>\n<p><strong>请求参数</strong></p>\n<ul>\n<li>dappMetaData - object<!-- -->\n<ul>\n<li>name - string: 应用名称，不会作为唯一表示</li>\n<li>icon - string: 应用图标的 URL。必须是 PNG、ICO 等格式，不支持 SVG 图标。最好传递指向 180x180px PNG 图标的 url。</li>\n</ul>\n</li>\n<li>actionsConfiguration - object<!-- -->\n<ul>\n<li>modals - ('before' | 'success' | 'error')[] | 'all'  交易过程中的提醒界面展示模式，默认为'before'</li>\n<li>returnStrategy -string 'none' | <code>${string}://${string}</code>; 针对app 钱包，指定当用户签署/拒绝请求时深层链接的返回策略，如果是在telegram中，可以配置tg://resolve</li>\n<li>tmaReturnUrl -string 'back' | 'none' | <code>${string}://${string}</code>; Telegram Mini Wallet 钱包中，用户签署/拒绝请求时深层链接的返回策略，一般配置back,表示签名后关闭钱包，会自动展示出dapp；none 表示签名后不做处理；默认为back；</li>\n</ul>\n</li>\n<li>uiPreferences -object<!-- -->\n<ul>\n<li>theme -  Theme 可以是：THEME.DARK, THEME.LIGHT, \"SYSTEM\"</li>\n</ul>\n</li>\n<li>language - \"en_US\" | \"ru_RU\" | \"zh_CN\" | \"ar_AE\" | \"cs_CZ\" | \"de_DE\" | \"es_ES\" | \"es_LAT\" | \"fr_FR\" | \"id_ID\" | \"it_IT\" | \"nl_NL\" | \"pl_PL\" | \"pt_BR\" | \"pt_PT\" | \"ro_RO\" | \"tr_TR\" | \"uk_UA\" | \"vi_VN\";\n, 默认为en_US</li>\n</ul>\n<p><strong>返回值</strong></p>\n<ul>\n<li>OKXUniversalConnectUI</li>\n</ul>\n<p><strong>示例</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> OKXUniversalConnectUI <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@okxconnect/ui\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> okxUniversalConnectUI <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> OKXUniversalConnectUI<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    dappMetaData<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        icon<span class=\"token operator\">:</span> <span class=\"token string\">\"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png\"</span><span class=\"token punctuation\">,</span>\n        name<span class=\"token operator\">:</span> <span class=\"token string\">\"OKX Connect Demo\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    actionsConfiguration<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        returnStrategy<span class=\"token operator\">:</span> <span class=\"token string\">'tg://resolve'</span><span class=\"token punctuation\">,</span>\n        modals<span class=\"token operator\">:</span><span class=\"token string\">\"all\"</span><span class=\"token punctuation\">,</span>\n        tmaReturnUrl<span class=\"token operator\">:</span><span class=\"token string\">'back'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    language<span class=\"token operator\">:</span> <span class=\"token string\">\"en_US\"</span><span class=\"token punctuation\">,</span>\n    uiPreferences<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        theme<span class=\"token operator\">:</span> <span class=\"token constant\">THEME</span><span class=\"token punctuation\">.</span><span class=\"token constant\">LIGHT</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h2 data-content=\"连接钱包\" id=\"连接钱包\">连接钱包<a class=\"index_header-anchor__Xqb+L\" href=\"#连接钱包\" style=\"opacity:0\">#</a></h2>\n<p>连接钱包去获取钱包地址，作为标识符和用于签名交易的必要参数;</p>\n<div class=\"remark-highlight\"><pre class=\"language-unknown\"><code class=\"language-unknown\">okxUniversalConnectUI.connect(connectParams: ConnectParams)</code></pre></div>\n<p><strong>请求参数</strong></p>\n<ul>\n<li>connectParams - ConnectParams<!-- -->\n<ul>\n<li>namespaces - [namespace: string]: ConnectNamespace ; 请求连接的可选信息， EVM系的key为\"eip155\"，COSMOS系的key为\"cosmos\"，如果请求的链中，有任何一个链钱包不支持的话，钱包会拒绝连接；<!-- -->\n<ul>\n<li>chains: string[]; 链id信息,</li>\n<li>defaultChain?: string; 默认链</li>\n</ul>\n</li>\n<li>optionalNamespaces - [namespace: string]: ConnectNamespace; 请求连接的可选信息， EVM系的key为\"eip155\"，COSMOS系的key为\"cosmos\"，如果对应的链信息钱包不支持，依然可以连接；<!-- -->\n<ul>\n<li>chains: string[]; 链id信息,<!-- -->\n<ul>\n<li>defaultChain?: string; 默认链</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>sessionConfig: object<!-- -->\n<ul>\n<li>redirect: string 连接成功后的跳转参数，如果是Telegram中的Mini App，这里可以设置为Telegram的deeplink: \"tg://resolve\"</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><strong>返回值</strong></p>\n<ul>\n<li>Promise<code>&lt;SessionTypes.Struct | undefined&gt;</code>\n<ul>\n<li>topic: string; 会话标识；</li>\n<li>namespaces: <code>Record&lt;string, Namespace&gt;</code>; 成功连接的namespace 信息；<!-- -->\n<ul>\n<li>chains: string[]; 连接的链信息；</li>\n<li>accounts: string[]; 连接的账户信息；</li>\n<li>methods: string[]; 当前namespace下，钱包支持的方法；</li>\n<li>defaultChain?: string; 当前会话的默认链</li>\n</ul>\n</li>\n<li>sessionConfig?: SessionConfig<!-- -->\n<ul>\n<li>dappInfo: object DApp 信息；<!-- -->\n<ul>\n<li>name:string</li>\n<li>icon:string</li>\n</ul>\n</li>\n<li>redirect?:string, 连接成功后的跳转参数；</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><strong>示例</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">var</span> session <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> okxUniversalConnectUI<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    namespaces<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        cosmos<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            chains<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string\">\"cosmos:cosmoshub-4\"</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token comment\">// \"cosmos:osmosis-1\"</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    sessionConfig<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        redirect<span class=\"token operator\">:</span> <span class=\"token string\">\"tg://resolve\"</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n<h2 data-content=\"连接钱包并签名\" id=\"连接钱包并签名\">连接钱包并签名<a class=\"index_header-anchor__Xqb+L\" href=\"#连接钱包并签名\" style=\"opacity:0\">#</a></h2>\n<p>连接钱包获取钱包地址，并对数据进行签名；签名结果会在\"connect_signResponse\"的event中回调；</p>\n<div class=\"remark-highlight\"><pre class=\"language-unknown\"><code class=\"language-unknown\">await okxUniversalConnectUI.openModalAndSign(connectParams: ConnectParams, signRequest: RequestParams[])</code></pre></div>\n<p><strong>请求参数</strong></p>\n<ul>\n<li>connectParams - ConnectParams<!-- -->\n<ul>\n<li>namespaces - [namespace: string]: ConnectNamespace ; 请求连接的可选信息，COSMOS系的key为\"cosmos\"，如果请求的链中，有任何一个链钱包不支持的话，钱包会拒绝连接；<!-- -->\n<ul>\n<li>chains: string[]; 链id信息,</li>\n<li>defaultChain?: string; 默认链</li>\n</ul>\n</li>\n<li>optionalNamespaces - [namespace: string]: ConnectNamespace; 请求连接的可选信息，COSMOS系的key为\"cosmos\"，如果对应的链信息钱包不支持，依然可以连接；<!-- -->\n<ul>\n<li>chains: string[]; 链id信息,<!-- -->\n<ul>\n<li>defaultChain?: string; 默认链</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>sessionConfig: object<!-- -->\n<ul>\n<li>redirect: string 连接成功后的跳转参数，如果是Telegram中的Mini App，这里可以设置为Telegram的deeplink: \"tg://resolve\"</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>signRequest - RequestParams[]; 请求连接并签名的方法, 同时最多只能支持一个方法；<!-- -->\n<ul>\n<li>method: string;  请求的方法名称, COSMOS系支持的方法有: \"cosmos_signArbitrary\"；</li>\n<li>chainId: string; 执行方法所在的链的ID, 该chainId必须包含在上面的namespaces中；</li>\n<li>params: unknown[] | Record<code>&lt;string, unknown&gt;</code> | object | undefined; 请求的方法对应的参数；</li>\n</ul>\n</li>\n</ul>\n<p><strong>返回值</strong></p>\n<ul>\n<li>Promise<code>&lt;SessionTypes.Struct | undefined&gt;</code>\n<ul>\n<li>topic: string; 会话标识；</li>\n<li>namespaces: <code>Record&lt;string, Namespace&gt;</code>; 成功连接的namespace 信息；<!-- -->\n<ul>\n<li>chains: string[]; 连接的链信息；</li>\n<li>accounts: string[]; 连接的账户信息；</li>\n<li>methods: string[]; 当前namespace下，钱包支持的方法；</li>\n<li>defaultChain?: string; 当前会话的默认链</li>\n</ul>\n</li>\n<li>sessionConfig?: SessionConfig<!-- -->\n<ul>\n<li>dappInfo: object DApp 信息；<!-- -->\n<ul>\n<li>name:string</li>\n<li>icon:string</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><strong>示例</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// 先添加签名结果监听</span>\nokxUniversalConnectUI<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"connect_signResponse\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>signResponse<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>signResponse<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> session <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> okxUniversalConnectUI<span class=\"token punctuation\">.</span><span class=\"token function\">openModalAndSign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        namespaces<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            cosmos<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                chains<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                    <span class=\"token string\">\"cosmos:cosmoshub-4\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token comment\">// \"cosmos:osmosis-1\"</span>\n                <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        sessionConfig<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            redirect<span class=\"token operator\">:</span> <span class=\"token string\">\"tg://resolve\"</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n            chainId<span class=\"token operator\">:</span> <span class=\"token string\">\"cosmos:cosmoshub-4\"</span><span class=\"token punctuation\">,</span>\n            method<span class=\"token operator\">:</span> <span class=\"token string\">\"cosmos_signArbitrary\"</span><span class=\"token punctuation\">,</span>\n            params<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                message<span class=\"token operator\">:</span> <span class=\"token string\">\"Hello Cosmos\"</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n<h2 data-content=\"判断钱包是否已连接\" id=\"判断钱包是否已连接\">判断钱包是否已连接<a class=\"index_header-anchor__Xqb+L\" href=\"#判断钱包是否已连接\" style=\"opacity:0\">#</a></h2>\n<p>获取当前是否有连接钱包;</p>\n<p><strong>返回值</strong></p>\n<ul>\n<li>boolean</li>\n</ul>\n<p><strong>示例</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\">okxUniversalConnectUI<span class=\"token punctuation\">.</span><span class=\"token function\">connected</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n<h2 data-content=\"准备交易\" id=\"准备交易\">准备交易<a class=\"index_header-anchor__Xqb+L\" href=\"#准备交易\" style=\"opacity:0\">#</a></h2>\n<p>首先创建一个OKXCosmosProvider对象，构造函数传入okxUniversalConnectUI</p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> OKXCosmosProvider <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@okxconnect/universal-provider\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> okxCosmosProvider <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OKXCosmosProvider</span><span class=\"token punctuation\">(</span>okxUniversalConnectUI<span class=\"token punctuation\">)</span>\n</code></pre></div>\n<h2 data-content=\"获取账户信息\" id=\"获取账户信息\">获取账户信息<a class=\"index_header-anchor__Xqb+L\" href=\"#获取账户信息\" style=\"opacity:0\">#</a></h2>\n<div class=\"remark-highlight\"><pre class=\"language-unknown\"><code class=\"language-unknown\">okxCosmosProvider.getAccount(chainId)</code></pre></div>\n<p><em><strong>请求参数</strong></em></p>\n<ul>\n<li>chainId: 请求的链，如cosmos:cosmoshub-4, cosmos:osmosis-1</li>\n</ul>\n<p><em><strong>返回值</strong></em></p>\n<ul>\n<li>Object<!-- -->\n<ul>\n<li>algo: \"secp256k1\",</li>\n<li>address: string 钱包地址,</li>\n<li>bech32Address: string 钱包地址,</li>\n<li>pubKey: Uint8Array 公钥,</li>\n</ul>\n</li>\n</ul>\n<p><em><strong>示例</strong></em></p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> okxCosmosProvider<span class=\"token punctuation\">.</span><span class=\"token function\">getAccount</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cosmos:cosmoshub-4\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//返回结构</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"algo\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"secp256k1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"address\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cosmos1u6lts9ng4etxj0zdaxsada6zgl8dudpg3ygvjw\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"bech32Address\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cosmos1u6lts9ng4etxj0zdaxsada6zgl8dudpg3ygvjw\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"pubKey\"</span><span class=\"token operator\">:</span> Unit8Aray<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h2 data-content=\"签署消息\" id=\"签署消息\">签署消息<a class=\"index_header-anchor__Xqb+L\" href=\"#签署消息\" style=\"opacity:0\">#</a></h2>\n<div class=\"remark-highlight\"><pre class=\"language-unknown\"><code class=\"language-unknown\">okxCosmosProvider.signArbitrary(chain, signerAddress, message)</code></pre></div>\n<p><em><strong>请求参数</strong></em></p>\n<ul>\n<li>chain - string, 请求执行方法的链</li>\n<li>signerAddress - string 签名钱包地址</li>\n<li>message - string 需要签名的消息。</li>\n</ul>\n<p><em><strong>返回值</strong></em></p>\n<ul>\n<li>Promise - object<!-- -->\n<ul>\n<li>pub_key : object<!-- -->\n<ul>\n<li>type:string 公钥类型</li>\n<li>value:string 公钥</li>\n</ul>\n</li>\n<li>signature: string 签名结果</li>\n</ul>\n</li>\n</ul>\n<p><em><strong>示例</strong></em></p>\n<div class=\"remark-highlight\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">let</span> chain <span class=\"token operator\">=</span> <span class=\"token string\">\"cosmos:cosmoshub-4\"</span>\n<span class=\"token keyword\">let</span> signStr <span class=\"token operator\">=</span> <span class=\"token string\">\"data need to sign ...\"</span>\n\n<span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> okxCosmosProvider<span class=\"token punctuation\">.</span><span class=\"token function\">signArbitrary</span><span class=\"token punctuation\">(</span>chain<span class=\"token punctuation\">,</span> signStr<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//返回结构: {\"pub_key\":{\"type\":\"tendermint/PubKeySecp256k1\",\"value\":\"AkRuGelKwOg+qJbScSUHV36zn73S1q6fD8C5dZ8furqQ\"},\"signature\":\"YSyndEFlHYTWpSXsn28oolZpKim/BnmCVD0hZfvPQHQV3Bc0B0EU77CKE6LpV+PUJn19d1skAQy/bXyzppnuxw==\"}</span>\n</code></pre></div>\n<h2 data-content=\"签署交易 signAmino\" id=\"签署交易-signamino\">签署交易 signAmino<a class=\"index_header-anchor__Xqb+L\" href=\"#签署交易-signamino\" style=\"opacity:0\">#</a></h2>\n<div class=\"remark-highlight\"><pre class=\"language-unknown\"><code class=\"language-unknown\">okxCosmosProvider.signAmino(chainId: string, signerAddress: string, signDoc: StdSignDoc, signOptions?: object)</code></pre></div>\n<p><em><strong>请求参数</strong></em></p>\n<ul>\n<li>\n<p>chainId - string, 请求签名执行的链，必传参数</p>\n</li>\n<li>\n<p>signerAddress - string,钱包地址</p>\n</li>\n<li>\n<p>signDoc - object，交易信息 按照固定格式签名，类似 cosmjs 的 OfflineSigner 的 signAmino 方法 参数就是对象，signDoc 就是一个固定格式\n<em><strong>返回值</strong></em></p>\n</li>\n<li>\n<p>Promise - Object</p>\n<ul>\n<li>signed - object,交易信息</li>\n<li>signature -object,签名结果</li>\n</ul>\n</li>\n</ul>\n<p><em><strong>示例</strong></em></p>\n<div class=\"remark-highlight\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">let</span> signDoc <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"chain_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"osmosis-1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"account_number\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"630104\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"sequence\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"480\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"fee\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string-property property\">\"gas\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"683300\"</span><span class=\"token punctuation\">,</span> <span class=\"token string-property property\">\"amount\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span><span class=\"token string-property property\">\"denom\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"uosmo\"</span><span class=\"token punctuation\">,</span> <span class=\"token string-property property\">\"amount\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2818\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"msgs\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"osmosis/poolmanager/swap-exact-amount-in\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string-property property\">\"sender\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"osmo1u6lts9ng4etxj0zdaxsada6zgl8dudpgelmuyu\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string-property property\">\"routes\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n                <span class=\"token string-property property\">\"pool_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1096\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string-property property\">\"token_out_denom\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ibc/987C17B11ABC2B20019178ACE62929FE9840202CE79498E29FE8E5CB02B7C0A4\"</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token string-property property\">\"pool_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"611\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string-property property\">\"token_out_denom\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ibc/27394FB092D2ECCD56123C74F36E4C1F926001CEADA9CA97EA622B25F41E5EB2\"</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string-property property\">\"token_in\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string-property property\">\"denom\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"uosmo\"</span><span class=\"token punctuation\">,</span> <span class=\"token string-property property\">\"amount\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"100\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string-property property\">\"token_out_min_amount\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"8\"</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"memo\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"FE\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"timeout_height\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"23603788\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"signOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">\"useOneClickTrading\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"preferNoSetFee\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"fee\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string-property property\">\"gas\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"683300\"</span><span class=\"token punctuation\">,</span> <span class=\"token string-property property\">\"amount\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span><span class=\"token string-property property\">\"denom\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"uosmo\"</span><span class=\"token punctuation\">,</span> <span class=\"token string-property property\">\"amount\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2818\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">let</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> provider<span class=\"token punctuation\">.</span><span class=\"token function\">signAmino</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cosmos:osmosis-1\"</span><span class=\"token punctuation\">,</span> provider<span class=\"token punctuation\">.</span><span class=\"token function\">getAccount</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cosmos:osmosis-1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">,</span> signDoc<span class=\"token punctuation\">)</span>\n\n\n<span class=\"token doc-comment comment\">/**\n    返回结构:\n    <span class=\"token punctuation\">{</span>\n    \"signed\": <span class=\"token punctuation\">{</span>\n    \"chain_id\": \"osmosis-1\",\n    \"account_number\": \"630104\",\n    \"sequence\": \"480\",\n    \"fee\": <span class=\"token punctuation\">{</span>\n    \"amount\": [\n    <span class=\"token punctuation\">{</span>\n    \"amount\": \"12500\",\n    \"denom\": \"uosmo\"\n    <span class=\"token punctuation\">}</span>\n    ],\n    \"gas\": \"500000\"\n    <span class=\"token punctuation\">}</span>,\n    \"msgs\": [\n    <span class=\"token punctuation\">{</span>\n    \"type\": \"osmosis/poolmanager/swap-exact-amount-in\",\n    \"value\": <span class=\"token punctuation\">{</span>\n    \"sender\": \"osmo1u6lts9ng4etxj0zdaxsada6zgl8dudpgelmuyu\",\n    \"routes\": [\n    <span class=\"token punctuation\">{</span>\n    \"pool_id\": \"1096\",\n    \"token_out_denom\": \"ibc/987C17B11ABC2B20019178ACE62929FE9840202CE79498E29FE8E5CB02B7C0A4\"\n    <span class=\"token punctuation\">}</span>,\n    <span class=\"token punctuation\">{</span>\n    \"pool_id\": \"611\",\n    \"token_out_denom\": \"ibc/27394FB092D2ECCD56123C74F36E4C1F926001CEADA9CA97EA622B25F41E5EB2\"\n    <span class=\"token punctuation\">}</span>\n    ],\n    \"token_in\": <span class=\"token punctuation\">{</span>\n    \"denom\": \"uosmo\",\n    \"amount\": \"100\"\n    <span class=\"token punctuation\">}</span>,\n    \"token_out_min_amount\": \"8\"\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    ],\n    \"memo\": \"FE\",\n    \"timeout_height\": \"23603788\",\n    \"signOptions\": <span class=\"token punctuation\">{</span>\n    \"useOneClickTrading\": false,\n    \"preferNoSetFee\": true,\n    \"fee\": <span class=\"token punctuation\">{</span>\n    \"gas\": \"683300\",\n    \"amount\": [\n    <span class=\"token punctuation\">{</span>\n    \"denom\": \"uosmo\",\n    \"amount\": \"2818\"\n    <span class=\"token punctuation\">}</span>\n    ]\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>,\n    \"signature\": <span class=\"token punctuation\">{</span>\n    \"pub_key\": <span class=\"token punctuation\">{</span>\n    \"type\": \"tendermint/PubKeySecp256k1\",\n    \"value\": \"AkRuGelKwOg+qJbScSUHV36zn73S1q6fD8C5dZ8furqQ\"\n    <span class=\"token punctuation\">}</span>,\n    \"signature\": \"2Brt/w+1U3C+tIbsI//pv9zTYca9WlBd1eKm/Gde5MFaRagmxtsn6h2beP7+4R4MDav7r1G+0Nxd5arB0qVfUw==\"\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n */</span>\n</code></pre></div>\n<h2 data-content=\"签署交易 signDirect\" id=\"签署交易-signdirect\">签署交易 signDirect<a class=\"index_header-anchor__Xqb+L\" href=\"#签署交易-signdirect\" style=\"opacity:0\">#</a></h2>\n<div class=\"remark-highlight\"><pre class=\"language-unknown\"><code class=\"language-unknown\">okxCosmosProvider.signDirect(chainId, signerAddress, signDoc, signOptions?)</code></pre></div>\n<p><em><strong>请求参数</strong></em></p>\n<ul>\n<li>chainId - string, 请求签名执行的链，必传参数，</li>\n<li>signerAddress - string, 钱包地址</li>\n<li>signDoc - object 交易数据<!-- -->\n<ul>\n<li>bodyBytes ,Uint8Array</li>\n<li>authInfoBytes, Uint8Array</li>\n<li>chainId, string</li>\n<li>accountNumber, string</li>\n</ul>\n</li>\n</ul>\n<p><em><strong>返回值</strong></em></p>\n<ul>\n<li>Promise - Object<!-- -->\n<ul>\n<li>signed - object,交易信息</li>\n<li>signature -object,签名结果</li>\n</ul>\n</li>\n</ul>\n<p><em><strong>示例</strong></em></p>\n<div class=\"remark-highlight\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">let</span> signDoc <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"bodyBytes\"</span><span class=\"token operator\">:</span> Uint8Array<span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"authInfoBytes\"</span><span class=\"token operator\">:</span> Uint8Array<span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"chainId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"osmosis-1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"accountNumber\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"630104\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">let</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> provider<span class=\"token punctuation\">.</span><span class=\"token function\">signDirect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cosmos:osmosis-1\"</span><span class=\"token punctuation\">,</span> provider<span class=\"token punctuation\">.</span><span class=\"token function\">getAccount</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cosmos:osmosis-1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">,</span> signDoc<span class=\"token punctuation\">)</span>\n\n\n<span class=\"token doc-comment comment\">/**\n    <span class=\"token punctuation\">{</span>\n    \"signed\": <span class=\"token punctuation\">{</span>\n    \"bodyBytes\": Uint8Array,\n    \"authInfoBytes\":Uint8Array ,\n    \"chainId\": \"osmosis-1\",\n    \"accountNumber\": \"630104\"\n    <span class=\"token punctuation\">}</span>,\n    \"signature\": <span class=\"token punctuation\">{</span>\n    \"pub_key\": <span class=\"token punctuation\">{</span>\n    \"type\": \"tendermint/PubKeySecp256k1\",\n    \"value\": \"AkRuGelKwOg+qJbScSUHV36zn73S1q6fD8C5dZ8furqQ\"\n    <span class=\"token punctuation\">}</span>,\n    \"signature\": \"YpX2kGmbZYVxUqK8y9OCweJNgZkS4WaS79nBDfOJaTgowPfY0gSbXSQeRLlif2SIkBqcwTNSItBqb5M7a6K30g==\"\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n */</span>\n</code></pre></div>\n<h2 data-content=\"断开钱包连接\" id=\"断开钱包连接\">断开钱包连接<a class=\"index_header-anchor__Xqb+L\" href=\"#断开钱包连接\" style=\"opacity:0\">#</a></h2>\n<p>断开已连接钱包,并删除当前会话,如果要切换连接钱包,请先断开当前钱包。</p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\">okxUniversalConnectUI<span class=\"token punctuation\">.</span><span class=\"token function\">disconnect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n<h2 data-content=\"Event事件\" id=\"event事件\">Event事件<a class=\"index_header-anchor__Xqb+L\" href=\"#event事件\" style=\"opacity:0\">#</a></h2>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// 生成 universalLink</span>\nokxUniversalConnectUI<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"display_uri\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>uri<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>uri<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// session 信息变更会触发该事件；</span>\nokxUniversalConnectUI<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"session_update\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>session<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>session<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 断开连接会触发该事件；</span>\nokxUniversalConnectUI<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"session_delete\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>topic<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>topic<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 连接并签名时,签名结果会触发该事件;</span>\nokxUniversalConnectUI<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"connect_signResponse\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>signResponse<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>signResponse<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h2 data-content=\"错误码\" id=\"错误码\">错误码<a class=\"index_header-anchor__Xqb+L\" href=\"#错误码\" style=\"opacity:0\">#</a></h2>\n<p>在连接，交易，断开连接的过程中可能抛出的异常;</p>\n<p><strong>异常</strong></p>\n<div class=\"index_table__kvZz5\"><table><thead><tr><th>错误码</th><th>描述</th></tr></thead><tbody><tr><td>OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR</td><td>未知异常</td></tr><tr><td>OKX_CONNECT_ERROR_CODES.ALREADY_CONNECTED_ERROR</td><td>钱包已连接</td></tr><tr><td>OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR</td><td>钱包未连接</td></tr><tr><td>OKX_CONNECT_ERROR_CODES.USER_REJECTS_ERROR</td><td>用户拒绝</td></tr><tr><td>OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED</td><td>方法不支持</td></tr><tr><td>OKX_CONNECT_ERROR_CODES.CHAIN_NOT_SUPPORTED</td><td>链不支持</td></tr><tr><td>OKX_CONNECT_ERROR_CODES.WALLET_NOT_SUPPORTED</td><td>钱包不支持</td></tr><tr><td>OKX_CONNECT_ERROR_CODES.CONNECTION_ERROR</td><td>连接异常</td></tr></tbody></table></div>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">enum</span> <span class=\"token constant\">OKX_CONNECT_ERROR_CODES</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token constant\">UNKNOWN_ERROR</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    <span class=\"token constant\">ALREADY_CONNECTED_ERROR</span> <span class=\"token operator\">=</span> <span class=\"token number\">11</span><span class=\"token punctuation\">,</span>\n    <span class=\"token constant\">NOT_CONNECTED_ERROR</span> <span class=\"token operator\">=</span> <span class=\"token number\">12</span><span class=\"token punctuation\">,</span>\n    <span class=\"token constant\">USER_REJECTS_ERROR</span> <span class=\"token operator\">=</span> <span class=\"token number\">300</span><span class=\"token punctuation\">,</span>\n    <span class=\"token constant\">METHOD_NOT_SUPPORTED</span> <span class=\"token operator\">=</span> <span class=\"token number\">400</span><span class=\"token punctuation\">,</span>\n    <span class=\"token constant\">CHAIN_NOT_SUPPORTED</span> <span class=\"token operator\">=</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span>\n    <span class=\"token constant\">WALLET_NOT_SUPPORTED</span> <span class=\"token operator\">=</span> <span class=\"token number\">600</span><span class=\"token punctuation\">,</span>\n    <span class=\"token constant\">CONNECTION_ERROR</span> <span class=\"token operator\">=</span> <span class=\"token number\">700</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div><!--/$--></div>",
  "url": "https://web3.okx.com/zh-hans/build/dev-docs/sdks/app-connect-cosmos-ui#安装及初始化",
  "navigation": {
    "breadcrumbs": [
      "DApp 连接钱包",
      "Cosmos",
      "UI"
    ],
    "sidebar_links": [
      "什么是连接钱包",
      "支持的网络",
      "接入前提",
      "EVM 兼容链",
      "Bitcoin 兼容链",
      "Solana 兼容链",
      "TON",
      "SUI",
      "Aptos/Movement",
      "Cosmos 系/Sei",
      "SDK",
      "UI",
      "Tron",
      "Starknet",
      "常见问题",
      "接入前提",
      "EVM 兼容链",
      "Bitcoin 兼容链",
      "Tron",
      "Solana 兼容链"
    ],
    "toc": [
      "安装及初始化",
      "连接钱包",
      "连接钱包并签名",
      "判断钱包是否已连接",
      "准备交易",
      "获取账户信息",
      "签署消息",
      "签署交易 signAmino",
      "签署交易 signDirect",
      "断开钱包连接",
      "Event事件",
      "错误码"
    ]
  },
  "word_count": 1215,
  "extract_time": "2025-05-27 07:23:41"
}