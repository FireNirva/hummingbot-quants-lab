{
  "title": "SDK | EVM兼容链 | 连接App或Mini钱包 | 接入 Web3 钱包 | DEX API 文档 | 欧易",
  "text": "SDK\n#\n安装及初始化\n#\n请确保更新OKX App到 6.88.0 版本或以后版本，即可开始接入：\n将 OKX Connect 集成到您的 DApp 中，可以使用 npm:\nnpm install @okxconnect/universal-provider\n连接钱包之前，需要先创建一个对象，用于后续连接钱包、发送交易等操作。\nOKXUniversalProvider.init({DAppMetaData: {name, icon}})\n请求参数\nDAppMetaData - object\nname - string: 应用名称，不会作为唯一表示\nicon - string: 应用图标的 URL。必须是 PNG、ICO 等格式，不支持 SVG 图标。最好传递指向 180x180px PNG 图标的 url。\n返回值\nOKXUniversalProvider\n示例\nimport\n{\nOKXUniversalProvider\n}\nfrom\n\"@okxconnect/universal-provider\"\n;\nconst\nokxUniversalProvider\n=\nawait\nOKXUniversalProvider\n.\ninit\n(\n{\nDAppMetaData\n:\n{\nname\n:\n\"application name\"\n,\nicon\n:\n\"application icon url\"\n}\n,\n}\n)\n连接钱包\n#\n连接钱包去获取钱包地址，作为标识符和用于签名交易的必要参数;\nokxUniversalProvider.connect(connectParams: ConnectParams);\n请求参数\nconnectParams - ConnectParams\nnamespaces - [namespace: string]: ConnectNamespace ; 请求连接的必要信息， EVM系的key为\"eip155\"\n，如果请求的链中，有任何一个链钱包不支持的话，钱包会拒绝连接；\nchains: string[]; 链id信息,\ndefaultChain?: string; 默认链\nrpcMap?: [chainId: string]: string; rpc 信息，配置了rpc url才能请求链上rpc信息，仅支持EVM系，配置RPC的链必须包含在chains中；\noptionalNamespaces - [namespace: string]: ConnectNamespace; 请求连接的可选信息， EVM系的key为\"eip155\"，如果对应的链信息钱包不支持，依然可以连接；如果需要连接自定义网络的话，可以将自定义网络的请求添加到此参数中，如果钱包中已经有该自定义网络，则会在请求结果 session 中返回该自定义链的信息；如果钱包不支持的话，请求结果session 中无该自定义链信息，可以再次调用 request 方法，method 设置为 wallet_addEthereumChain，添加该自定义链。\nchains: string[]; 链id信息,\ndefaultChain?: string; 默认链\nrpcMap?: [chainId: string]: string; rpc 信息，配置了rpc url才能请求链上rpc信息，仅支持EVM系，配置RPC的链必须包含在chains中；\nsessionConfig: object\nredirect: string 连接成功后的跳转参数，如果是Telegram中的Mini App，这里可以设置为Telegram的deeplink: \"tg://resolve\"\n返回值\nPromise\n<SessionTypes.Struct | undefined>\ntopic: string; 会话标识；\nnamespaces:\nRecord<string, Namespace>\n; 成功连接的namespace 信息；\nchains: string[]; 连接的链信息；\naccounts: string[]; 连接的账户信息；\nmethods: string[]; 当前namespace下，钱包支持的方法；\ndefaultChain?: string; 当前会话的默认链\nsessionConfig?: SessionConfig\nDAppInfo: object DApp 信息；\nname:string\nicon:string\nredirect?:string, 连接成功后的跳转参数；\n示例\nvar\nsession\n=\nawait\nokxUniversalProvider\n.\nconnect\n(\n{\nnamespaces\n:\n{\neip155\n:\n{\n// 请按需组合需要的链id传入，多条链就传入多个\nchains\n:\n[\n\"eip155:1\"\n,\n\"eip155:137\"\n]\n,\ndefaultChain\n:\n\"1\"\n,\nrpcMap\n:\n{\n\"137\"\n:\n\"https://polygon.drpc.org\"\n}\n}\n}\n,\noptionalNamespaces\n:\n{\neip155\n:\n{\nchains\n:\n[\n\"eip155:43114\"\n]\n}\n}\n,\nsessionConfig\n:\n{\nredirect\n:\n\"tg://resolve\"\n}\n}\n)\n判断钱包是否已连接\n#\n获取当前是否有连接钱包;\n返回值\nboolean\n示例\nokxUniversalProvider\n.\nconnected\n(\n)\n;\n准备交易\n#\n向钱包发送消息的方法，支持签名，交易;\nokxUniversalProvider.request(requestArguments, chain);\n请求参数\nrequestArguments - object\nmethod: string; 请求的方法名，\nparams?: unknown[] | Record\n<string, unknown>\n| object | undefined; 请求的方法对应的参数；\nredirect -string 'none' |\n${string}://${string}\n; App 钱包中，用户签署或拒绝请求时深层链接的返回策略，如果是Telegram中的Mini App，可以配置tg://resolve，如果这里没有配置的话，会取connect方法传递的 redirect，默认为 ‘none’\nchain: string, 请求方法执行的链，建议传该参数，如果未传的话，会被设置为当前的defaultChain；\n返回值\n根据不同方法的执行结果，会返回不同的参数，具体参数参照下面的示例；\npersonal_sign\nPromise - string 签名结果；\neth_signTypedData_v4\nPromise - string 签名结果\neth_sendTransaction\nPromise - string hash\neth_accounts\nPromise - string[] 返回默认chainId的地址;\neth_requestAccounts\nPromise - string[] 返回默认chainId的地址;\neth_chainId\nPromise - number 返回默认链id;\nwallet_switchEthereumChain\nPromise - null\nwallet_addEthereumChain\nPromise - null\nwallet_watchAsset\nPromise - boolean 添加成功\n示例\nlet\nchain\n=\n'eip155:1'\nvar\ndata\n=\n{\n}\n// 在chain链上执行 personalSign，\n// params 数组中，第一个参数为 Challenge 必选；\n// 第二个参数 hex encoded address 为可选项\ndata\n=\n{\n\"method\"\n:\n\"personal_sign\"\n,\n\"params\"\n:\n[\n\"0x506c65617365207369676e2074686973206d65737361676520746f20636f6e6669726d20796f7572206964656e746974792e\"\n,\n\"0x4B0897b0513FdBeEc7C469D9aF4fA6C0752aBea7\"\n]\n}\nvar\npersonalSignResult\n=\nawait\nokxUniversalProvider\n.\nrequest\n(\ndata\n,\nchain\n)\n//personalSignResult: 0xe8d34297c33a61\"\n// 在chain链上执行 eth_signTypedData_v4\n// params 数组中，第一个参数为 地址 是可选项；\n// 第二个参数是TypedData 必传\ndata\n=\n{\n\"method\"\n:\n\"eth_signTypedData_v4\"\n,\n\"params\"\n:\n[\n\"0x00000\"\n,\n{\n\"domain\"\n:\n{\n\"name\"\n:\n\"Ether Mail\"\n,\n\"version\"\n:\n\"1\"\n,\n\"chainId\"\n:\n1\n,\n\"verifyingContract\"\n:\n\"0xcccccccccccccccccccccccccccccccccccccccc\"\n}\n,\n\"message\"\n:\n{\n\"from\"\n:\n{\n\"name\"\n:\n\"Cow\"\n,\n\"wallet\"\n:\n\"0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826\"\n}\n,\n\"to\"\n:\n{\n\"name\"\n:\n\"Bob\"\n,\n\"wallet\"\n:\n\"0xbBbBBBBbbBBBbbbBbbBbbbbBBbBbbbbBbBbbBBbB\"\n}\n,\n\"contents\"\n:\n\"Hello, Bob!\"\n}\n,\n\"primaryType\"\n:\n\"Mail\"\n,\n\"types\"\n:\n{\n\"EIP712Domain\"\n:\n[\n{\n\"name\"\n:\n\"name\"\n,\n\"type\"\n:\n\"string\"\n}\n,\n{\n\"name\"\n:\n\"version\"\n,\n\"type\"\n:\n\"string\"\n}\n,\n{\n\"name\"\n:\n\"chainId\"\n,\n\"type\"\n:\n\"uint256\"\n}\n,\n{\n\"name\"\n:\n\"verifyingContract\"\n,\n\"type\"\n:\n\"address\"\n}\n]\n,\n\"Person\"\n:\n[\n{\n\"name\"\n:\n\"name\"\n,\n\"type\"\n:\n\"string\"\n}\n,\n{\n\"name\"\n:\n\"wallet\"\n,\n\"type\"\n:\n\"address\"\n}\n]\n,\n\"Mail\"\n:\n[\n{\n\"name\"\n:\n\"from\"\n,\n\"type\"\n:\n\"Person\"\n}\n,\n{\n\"name\"\n:\n\"to\"\n,\n\"type\"\n:\n\"Person\"\n}\n,\n{\n\"name\"\n:\n\"contents\"\n,\n\"type\"\n:\n\"string\"\n}\n]\n}\n}\n]\n}\nvar\nsignTypeV4Result\n=\nawait\nokxUniversalProvider\n.\nrequest\n(\ndata\n,\nchain\n)\n//signTypeV4Result: \"0xa8bb3c6b33a119d...\"\n// 在chain链上执行 sendTransaction,\ndata\n=\n{\n\"method\"\n:\n\"eth_sendTransaction\"\n,\n\"params\"\n:\n[\n{\nto\n:\n\"0x4B...\"\n,\nfrom\n:\n\"0xDe...\"\n,\ngas\n:\n\"0x76c0\"\n,\nvalue\n:\n\"0x8ac7230489e80000\"\n,\ndata\n:\n\"0x\"\n,\ngasPrice\n:\n\"0x4a817c800\"\n}\n]\n}\nvar\nsendTransactionResult\n=\nawait\nokxUniversalProvider\n.\nrequest\n(\ndata\n,\nchain\n)\n// \"0x1ccf2c4a3d689067fc2ac...\"\n// 获取默认链的地址信息；\ndata\n=\n{\n\"method\"\n:\n\"eth_requestAccounts\"\n}\nvar\nethRequestAccountsResult\n=\nawait\nokxUniversalProvider\n.\nrequest\n(\ndata\n,\nchain\n)\n// [\"0xf2f3e73b...\"]\n// 获取默认链信息；\ndata\n=\n{\n\"method\"\n:\n\"eth_chainId\"\n}\nvar\nchainIdResult\n=\nawait\nokxUniversalProvider\n.\nrequest\n(\ndata\n,\nchain\n)\n//chainIdResult 1\n// 切换链；\ndata\n=\n{\n\"method\"\n:\n\"wallet_switchEthereumChain\"\n,\n\"params\"\n:\n[\n{\nchainId\n:\n\"0x1\"\n}\n]\n}\nvar\nswitchResult\n=\nawait\nokxUniversalProvider\n.\nrequest\n(\ndata\n,\nchain\n)\n// switchResult null\n// 添加链\ndata\n=\n{\n\"method\"\n:\n\"wallet_addEthereumChain\"\n,\n\"params\"\n:\n[\n{\n\"blockExplorerUrls\"\n:\n[\n\"https://explorer.fuse.io\"\n]\n,\n\"chainId\"\n:\n\"0x7a\"\n,\n\"chainName\"\n:\n\"Fuse\"\n,\n\"nativeCurrency\"\n:\n{\n\"name\"\n:\n\"Fuse\"\n,\n\"symbol\"\n:\n\"FUSE\"\n,\n\"decimals\"\n:\n18\n}\n,\n\"rpcUrls\"\n:\n[\n\"https://rpc.fuse.io\"\n]\n}\n]\n}\nvar\naddEthereumChainResult\n=\nawait\nokxUniversalProvider\n.\nrequest\n(\ndata\n,\nchain\n)\n//addEthereumChainResult null\n// 在chain链 watchAsset 添加币种\ndata\n=\n{\n\"method\"\n:\n\"wallet_watchAsset\"\n,\n\"params\"\n:\n[\n{\n\"type\"\n:\n\"ERC20\"\n,\n\"options\"\n:\n{\n\"address\"\n:\n\"0xeB51D9A39AD5EEF215dC0Bf39a8821ff804A0F01\"\n,\n\"symbol\"\n:\n\"LGNS\"\n,\n\"image\"\n:\n\"https://polygonscan.com/token/images/originlgns_32.png\"\n,\n\"decimals\"\n:\n9\n}\n}\n]\n}\nvar\nwatchAssetResult\n=\nawait\nokxUniversalProvider\n.\nrequest\n(\ndata\n,\nchain\n)\n// watchAssetResult\n// true/false\n使用RPC\n#\n当EVM系的 request 中 method 无法满足需求时，可通过配置 RPC 实现更多功能，在连接钱包connect()时,RPC配置在rpcMap中。\n示例\n//查询交易Hash的详细信息\nlet\nrpcData\n=\n{\nmethod\n:\n\"eth_getTransactionByHash\"\n,\nparams\n:\n[\n\"0xd62fa4ea3cf7ee3bf6f5302b764490730186ed6a567c283517e8cb3c36142e1a\"\n]\n,\n}\n;\nlet\nresult\n=\nawait\nuniversalUi\n.\nrequest\n(\nrpcData\n,\n\"eip155:137\"\n)\n设置默认网络\n#\n在连接多个网络的状况下,如果开发者没有明确指定当前操作所在网络,则通过默认网络进行交互\n示例\nokxUniversalProvider\n.\nsetDefaultChain\n(\n\"eip155:1\"\n)\n断开钱包连接\n#\n断开已连接钱包,并删除当前会话,如果要切换连接钱包,请先断开当前钱包\nokxUniversalProvider\n.\ndisconnect\n(\n)\n;\nEvent事件\n#\n// 生成 universalLink\nokxUniversalProvider\n.\non\n(\n\"display_uri\"\n,\n(\nuri\n)\n=>\n{\nconsole\n.\nlog\n(\nuri\n)\n;\n}\n)\n;\n// session 信息变更（例如添加自定义链）会触发该事件；\nokxUniversalProvider\n.\non\n(\n\"session_update\"\n,\n(\nsession\n)\n=>\n{\nconsole\n.\nlog\n(\nJSON\n.\nstringify\n(\nsession\n)\n)\n;\n}\n)\n;\n// 断开连接会触发该事件；\nokxUniversalProvider\n.\non\n(\n\"session_delete\"\n,\n(\n{\ntopic\n}\n)\n=>\n{\nconsole\n.\nlog\n(\ntopic\n)\n;\n}\n)\n;\n错误码\n#\n在连接，交易，断开连接的过程中可能抛出的异常;\n异常\n错误码\n描述\nOKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR\n未知异常\nOKX_CONNECT_ERROR_CODES.ALREADY_CONNECTED_ERROR\n钱包已连接\nOKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR\n钱包未连接\nOKX_CONNECT_ERROR_CODES.USER_REJECTS_ERROR\n用户拒绝\nOKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED\n方法不支持\nOKX_CONNECT_ERROR_CODES.CHAIN_NOT_SUPPORTED\n链不支持\nOKX_CONNECT_ERROR_CODES.WALLET_NOT_SUPPORTED\n钱包不支持\nOKX_CONNECT_ERROR_CODES.CONNECTION_ERROR\n连接异常\nexport\nenum\nOKX_CONNECT_ERROR_CODES\n{\nUNKNOWN_ERROR\n=\n0\n,\nALREADY_CONNECTED_ERROR\n=\n11\n,\nNOT_CONNECTED_ERROR\n=\n12\n,\nUSER_REJECTS_ERROR\n=\n300\n,\nMETHOD_NOT_SUPPORTED\n=\n400\n,\nCHAIN_NOT_SUPPORTED\n=\n500\n,\nWALLET_NOT_SUPPORTED\n=\n600\n,\nCONNECTION_ERROR\n=\n700\n}",
  "html": "<div class=\"routes_md__xWlGF\"><!--$--><h1 id=\"sdk\">SDK<a class=\"index_header-anchor__Xqb+L\" href=\"#sdk\" style=\"opacity:0\">#</a></h1>\n<h2 data-content=\"安装及初始化\" id=\"安装及初始化\">安装及初始化<a class=\"index_header-anchor__Xqb+L\" href=\"#安装及初始化\" style=\"opacity:0\">#</a></h2>\n<p>请确保更新OKX App到 6.88.0 版本或以后版本，即可开始接入：</p>\n<p>将 OKX Connect 集成到您的 DApp 中，可以使用 npm:</p>\n<div class=\"remark-highlight\"><pre class=\"language-unknown\"><code class=\"language-unknown\">npm install @okxconnect/universal-provider</code></pre></div>\n<p>连接钱包之前，需要先创建一个对象，用于后续连接钱包、发送交易等操作。</p>\n<p><code>OKXUniversalProvider.init({DAppMetaData: {name, icon}})</code></p>\n<p><strong>请求参数</strong></p>\n<ul>\n<li>DAppMetaData - object<!-- -->\n<ul>\n<li>name - string: 应用名称，不会作为唯一表示</li>\n<li>icon - string: 应用图标的 URL。必须是 PNG、ICO 等格式，不支持 SVG 图标。最好传递指向 180x180px PNG 图标的 url。</li>\n</ul>\n</li>\n</ul>\n<p><strong>返回值</strong></p>\n<ul>\n<li>OKXUniversalProvider</li>\n</ul>\n<p><strong>示例</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>OKXUniversalProvider<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@okxconnect/universal-provider\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> okxUniversalProvider <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> OKXUniversalProvider<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    DAppMetaData<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        name<span class=\"token operator\">:</span> <span class=\"token string\">\"application name\"</span><span class=\"token punctuation\">,</span>\n        icon<span class=\"token operator\">:</span> <span class=\"token string\">\"application icon url\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n<h2 data-content=\"连接钱包\" id=\"连接钱包\">连接钱包<a class=\"index_header-anchor__Xqb+L\" href=\"#连接钱包\" style=\"opacity:0\">#</a></h2>\n<p>连接钱包去获取钱包地址，作为标识符和用于签名交易的必要参数;</p>\n<p><code>okxUniversalProvider.connect(connectParams: ConnectParams);</code></p>\n<p><strong>请求参数</strong></p>\n<ul>\n<li>connectParams - ConnectParams<!-- -->\n<ul>\n<li>namespaces - [namespace: string]: ConnectNamespace ; 请求连接的必要信息， EVM系的key为\"eip155\"\n，如果请求的链中，有任何一个链钱包不支持的话，钱包会拒绝连接；<!-- -->\n<ul>\n<li>chains: string[]; 链id信息,</li>\n<li>defaultChain?: string; 默认链</li>\n<li>rpcMap?: [chainId: string]: string; rpc 信息，配置了rpc url才能请求链上rpc信息，仅支持EVM系，配置RPC的链必须包含在chains中；</li>\n</ul>\n</li>\n<li>optionalNamespaces - [namespace: string]: ConnectNamespace; 请求连接的可选信息， EVM系的key为\"eip155\"，如果对应的链信息钱包不支持，依然可以连接；如果需要连接自定义网络的话，可以将自定义网络的请求添加到此参数中，如果钱包中已经有该自定义网络，则会在请求结果 session 中返回该自定义链的信息；如果钱包不支持的话，请求结果session 中无该自定义链信息，可以再次调用 request 方法，method 设置为 wallet_addEthereumChain，添加该自定义链。<!-- -->\n<ul>\n<li>chains: string[]; 链id信息,</li>\n<li>defaultChain?: string; 默认链</li>\n<li>rpcMap?: [chainId: string]: string; rpc 信息，配置了rpc url才能请求链上rpc信息，仅支持EVM系，配置RPC的链必须包含在chains中；</li>\n</ul>\n</li>\n<li>sessionConfig: object<!-- -->\n<ul>\n<li>redirect: string 连接成功后的跳转参数，如果是Telegram中的Mini App，这里可以设置为Telegram的deeplink: \"tg://resolve\"</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><strong>返回值</strong></p>\n<ul>\n<li>Promise<code>&lt;SessionTypes.Struct | undefined&gt;</code>\n<ul>\n<li>topic: string; 会话标识；</li>\n<li>namespaces: <code>Record&lt;string, Namespace&gt;</code>; 成功连接的namespace 信息；<!-- -->\n<ul>\n<li>chains: string[]; 连接的链信息；</li>\n<li>accounts: string[]; 连接的账户信息；</li>\n<li>methods: string[]; 当前namespace下，钱包支持的方法；</li>\n<li>defaultChain?: string; 当前会话的默认链</li>\n</ul>\n</li>\n<li>sessionConfig?: SessionConfig<!-- -->\n<ul>\n<li>DAppInfo: object DApp 信息；<!-- -->\n<ul>\n<li>name:string</li>\n<li>icon:string</li>\n</ul>\n</li>\n<li>redirect?:string, 连接成功后的跳转参数；</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><strong>示例</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">var</span> session <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> okxUniversalProvider<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    namespaces<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        eip155<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// 请按需组合需要的链id传入，多条链就传入多个</span>\n            chains<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"eip155:1\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"eip155:137\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            defaultChain<span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n            rpcMap<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token string-property property\">\"137\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"https://polygon.drpc.org\"</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    optionalNamespaces<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        eip155<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            chains<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"eip155:43114\"</span><span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    sessionConfig<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        redirect<span class=\"token operator\">:</span> <span class=\"token string\">\"tg://resolve\"</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n<h2 data-content=\"判断钱包是否已连接\" id=\"判断钱包是否已连接\">判断钱包是否已连接<a class=\"index_header-anchor__Xqb+L\" href=\"#判断钱包是否已连接\" style=\"opacity:0\">#</a></h2>\n<p>获取当前是否有连接钱包;</p>\n<p><strong>返回值</strong></p>\n<ul>\n<li>boolean</li>\n</ul>\n<p><strong>示例</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\">okxUniversalProvider<span class=\"token punctuation\">.</span><span class=\"token function\">connected</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h2 data-content=\"准备交易\" id=\"准备交易\">准备交易<a class=\"index_header-anchor__Xqb+L\" href=\"#准备交易\" style=\"opacity:0\">#</a></h2>\n<p>向钱包发送消息的方法，支持签名，交易;</p>\n<div class=\"remark-highlight\"><pre class=\"language-unknown\"><code class=\"language-unknown\">okxUniversalProvider.request(requestArguments, chain);</code></pre></div>\n<p><strong>请求参数</strong></p>\n<ul>\n<li>requestArguments - object<!-- -->\n<ul>\n<li>method: string; 请求的方法名，</li>\n<li>params?: unknown[]  | Record<code>&lt;string, unknown&gt;</code> | object | undefined; 请求的方法对应的参数；</li>\n<li>redirect -string 'none' | <code>${string}://${string}</code>; App 钱包中，用户签署或拒绝请求时深层链接的返回策略，如果是Telegram中的Mini App，可以配置tg://resolve，如果这里没有配置的话，会取connect方法传递的 redirect，默认为 ‘none’</li>\n</ul>\n</li>\n<li>chain: string, 请求方法执行的链，建议传该参数，如果未传的话，会被设置为当前的defaultChain；</li>\n</ul>\n<p><strong>返回值</strong></p>\n<p>根据不同方法的执行结果，会返回不同的参数，具体参数参照下面的示例；</p>\n<ul>\n<li>\n<p>personal_sign</p>\n<ul>\n<li>Promise - string 签名结果；</li>\n</ul>\n</li>\n<li>\n<p>eth_signTypedData_v4</p>\n<ul>\n<li>Promise - string 签名结果</li>\n</ul>\n</li>\n<li>\n<p>eth_sendTransaction</p>\n<ul>\n<li>Promise - string hash</li>\n</ul>\n</li>\n<li>\n<p>eth_accounts</p>\n<ul>\n<li>Promise - string[] 返回默认chainId的地址;</li>\n</ul>\n</li>\n<li>\n<p>eth_requestAccounts</p>\n<ul>\n<li>Promise - string[] 返回默认chainId的地址;</li>\n</ul>\n</li>\n<li>\n<p>eth_chainId</p>\n<ul>\n<li>Promise - number 返回默认链id;</li>\n</ul>\n</li>\n<li>\n<p>wallet_switchEthereumChain</p>\n<ul>\n<li>Promise - null</li>\n</ul>\n</li>\n<li>\n<p>wallet_addEthereumChain</p>\n<ul>\n<li>Promise - null</li>\n</ul>\n</li>\n<li>\n<p>wallet_watchAsset</p>\n<ul>\n<li>Promise - boolean 添加成功</li>\n</ul>\n</li>\n</ul>\n<p><strong>示例</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">let</span> chain <span class=\"token operator\">=</span> <span class=\"token string\">'eip155:1'</span>\n<span class=\"token keyword\">var</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 在chain链上执行 personalSign，</span>\n<span class=\"token comment\">// params 数组中，第一个参数为 Challenge 必选；</span>\n<span class=\"token comment\">//               第二个参数 hex encoded address 为可选项</span>\ndata <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"method\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"personal_sign\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"params\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"0x506c65617365207369676e2074686973206d65737361676520746f20636f6e6669726d20796f7572206964656e746974792e\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"0x4B0897b0513FdBeEc7C469D9aF4fA6C0752aBea7\"</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> personalSignResult <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> okxUniversalProvider<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> chain<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//personalSignResult:   0xe8d34297c33a61\"</span>\n\n<span class=\"token comment\">// 在chain链上执行 eth_signTypedData_v4</span>\n<span class=\"token comment\">// params 数组中，第一个参数为 地址 是可选项；</span>\n<span class=\"token comment\">//               第二个参数是TypedData 必传</span>\ndata <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"method\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eth_signTypedData_v4\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"params\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"0x00000\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token string-property property\">\"domain\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token string-property property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Ether Mail\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string-property property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string-property property\">\"chainId\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string-property property\">\"verifyingContract\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0xcccccccccccccccccccccccccccccccccccccccc\"</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string-property property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token string-property property\">\"from\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string-property property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Cow\"</span><span class=\"token punctuation\">,</span> <span class=\"token string-property property\">\"wallet\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string-property property\">\"to\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string-property property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Bob\"</span><span class=\"token punctuation\">,</span> <span class=\"token string-property property\">\"wallet\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0xbBbBBBBbbBBBbbbBbbBbbbbBBbBbbbbBbBbbBBbB\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string-property property\">\"contents\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Hello, Bob!\"</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string-property property\">\"primaryType\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Mail\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string-property property\">\"types\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token string-property property\">\"EIP712Domain\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span><span class=\"token string-property property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> <span class=\"token string-property property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token string-property property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"version\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token string-property property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string-property property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"chainId\"</span><span class=\"token punctuation\">,</span> <span class=\"token string-property property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"uint256\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string-property property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"verifyingContract\"</span><span class=\"token punctuation\">,</span> <span class=\"token string-property property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"address\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string-property property\">\"Person\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span><span class=\"token string-property property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> <span class=\"token string-property property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string-property property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"wallet\"</span><span class=\"token punctuation\">,</span> <span class=\"token string-property property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"address\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string-property property\">\"Mail\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span><span class=\"token string-property property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"from\"</span><span class=\"token punctuation\">,</span> <span class=\"token string-property property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Person\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string-property property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"to\"</span><span class=\"token punctuation\">,</span> <span class=\"token string-property property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Person\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token string-property property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"contents\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token string-property property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string\"</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> signTypeV4Result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> okxUniversalProvider<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> chain<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//signTypeV4Result: \"0xa8bb3c6b33a119d...\"</span>\n\n<span class=\"token comment\">// 在chain链上执行 sendTransaction,</span>\ndata <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"method\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eth_sendTransaction\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"params\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n            to<span class=\"token operator\">:</span> <span class=\"token string\">\"0x4B...\"</span><span class=\"token punctuation\">,</span>\n            from<span class=\"token operator\">:</span> <span class=\"token string\">\"0xDe...\"</span><span class=\"token punctuation\">,</span>\n            gas<span class=\"token operator\">:</span> <span class=\"token string\">\"0x76c0\"</span><span class=\"token punctuation\">,</span>\n            value<span class=\"token operator\">:</span> <span class=\"token string\">\"0x8ac7230489e80000\"</span><span class=\"token punctuation\">,</span>\n            data<span class=\"token operator\">:</span> <span class=\"token string\">\"0x\"</span><span class=\"token punctuation\">,</span>\n            gasPrice<span class=\"token operator\">:</span> <span class=\"token string\">\"0x4a817c800\"</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> sendTransactionResult <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> okxUniversalProvider<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> chain<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// \"0x1ccf2c4a3d689067fc2ac...\"</span>\n\n<span class=\"token comment\">// 获取默认链的地址信息；</span>\ndata <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string-property property\">\"method\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eth_requestAccounts\"</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> ethRequestAccountsResult <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> okxUniversalProvider<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> chain<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//  [\"0xf2f3e73b...\"]</span>\n\n<span class=\"token comment\">// 获取默认链信息；</span>\ndata <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string-property property\">\"method\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eth_chainId\"</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> chainIdResult <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> okxUniversalProvider<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> chain<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//chainIdResult   1</span>\n\n<span class=\"token comment\">// 切换链；</span>\ndata <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"method\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"wallet_switchEthereumChain\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"params\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n            chainId<span class=\"token operator\">:</span> <span class=\"token string\">\"0x1\"</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> switchResult <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> okxUniversalProvider<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> chain<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// switchResult null</span>\n\n<span class=\"token comment\">// 添加链</span>\ndata <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"method\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"wallet_addEthereumChain\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"params\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">\"blockExplorerUrls\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"https://explorer.fuse.io\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"chainId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0x7a\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"chainName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Fuse\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"nativeCurrency\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string-property property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Fuse\"</span><span class=\"token punctuation\">,</span> <span class=\"token string-property property\">\"symbol\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"FUSE\"</span><span class=\"token punctuation\">,</span> <span class=\"token string-property property\">\"decimals\"</span><span class=\"token operator\">:</span> <span class=\"token number\">18</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"rpcUrls\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"https://rpc.fuse.io\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> addEthereumChainResult <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> okxUniversalProvider<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> chain<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//addEthereumChainResult   null</span>\n\n<span class=\"token comment\">// 在chain链 watchAsset 添加币种</span>\ndata <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"method\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"wallet_watchAsset\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"params\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ERC20\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"options\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string-property property\">\"address\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0xeB51D9A39AD5EEF215dC0Bf39a8821ff804A0F01\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string-property property\">\"symbol\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"LGNS\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string-property property\">\"image\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://polygonscan.com/token/images/originlgns_32.png\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string-property property\">\"decimals\"</span><span class=\"token operator\">:</span> <span class=\"token number\">9</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> watchAssetResult <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> okxUniversalProvider<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> chain<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// watchAssetResult</span>\n<span class=\"token comment\">// true/false</span>\n\n</code></pre></div>\n<h2 data-content=\"使用RPC\" id=\"使用rpc\">使用RPC<a class=\"index_header-anchor__Xqb+L\" href=\"#使用rpc\" style=\"opacity:0\">#</a></h2>\n<p>当EVM系的 request 中 method 无法满足需求时，可通过配置 RPC 实现更多功能，在连接钱包connect()时,RPC配置在rpcMap中。</p>\n<p><strong>示例</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">//查询交易Hash的详细信息</span>\n<span class=\"token keyword\">let</span> rpcData <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    method<span class=\"token operator\">:</span> <span class=\"token string\">\"eth_getTransactionByHash\"</span><span class=\"token punctuation\">,</span>\n    params<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"0xd62fa4ea3cf7ee3bf6f5302b764490730186ed6a567c283517e8cb3c36142e1a\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> universalUi<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span>rpcData<span class=\"token punctuation\">,</span><span class=\"token string\">\"eip155:137\"</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n<h2 data-content=\"设置默认网络\" id=\"设置默认网络\">设置默认网络<a class=\"index_header-anchor__Xqb+L\" href=\"#设置默认网络\" style=\"opacity:0\">#</a></h2>\n<p>在连接多个网络的状况下,如果开发者没有明确指定当前操作所在网络,则通过默认网络进行交互</p>\n<p><strong>示例</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\">okxUniversalProvider<span class=\"token punctuation\">.</span><span class=\"token function\">setDefaultChain</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"eip155:1\"</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n<h2 data-content=\"断开钱包连接\" id=\"断开钱包连接\">断开钱包连接<a class=\"index_header-anchor__Xqb+L\" href=\"#断开钱包连接\" style=\"opacity:0\">#</a></h2>\n<p>断开已连接钱包,并删除当前会话,如果要切换连接钱包,请先断开当前钱包</p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\">okxUniversalProvider<span class=\"token punctuation\">.</span><span class=\"token function\">disconnect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h2 data-content=\"Event事件\" id=\"event事件\">Event事件<a class=\"index_header-anchor__Xqb+L\" href=\"#event事件\" style=\"opacity:0\">#</a></h2>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// 生成 universalLink</span>\nokxUniversalProvider<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"display_uri\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>uri<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>uri<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// session 信息变更（例如添加自定义链）会触发该事件；</span>\nokxUniversalProvider<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"session_update\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>session<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>session<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 断开连接会触发该事件；</span>\nokxUniversalProvider<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"session_delete\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>topic<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>topic<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h2 data-content=\"错误码\" id=\"错误码\">错误码<a class=\"index_header-anchor__Xqb+L\" href=\"#错误码\" style=\"opacity:0\">#</a></h2>\n<p>在连接，交易，断开连接的过程中可能抛出的异常;</p>\n<p><strong>异常</strong></p>\n<div class=\"index_table__kvZz5\"><table><thead><tr><th>错误码</th><th>描述</th></tr></thead><tbody><tr><td>OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR</td><td>未知异常</td></tr><tr><td>OKX_CONNECT_ERROR_CODES.ALREADY_CONNECTED_ERROR</td><td>钱包已连接</td></tr><tr><td>OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR</td><td>钱包未连接</td></tr><tr><td>OKX_CONNECT_ERROR_CODES.USER_REJECTS_ERROR</td><td>用户拒绝</td></tr><tr><td>OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED</td><td>方法不支持</td></tr><tr><td>OKX_CONNECT_ERROR_CODES.CHAIN_NOT_SUPPORTED</td><td>链不支持</td></tr><tr><td>OKX_CONNECT_ERROR_CODES.WALLET_NOT_SUPPORTED</td><td>钱包不支持</td></tr><tr><td>OKX_CONNECT_ERROR_CODES.CONNECTION_ERROR</td><td>连接异常</td></tr></tbody></table></div>\n<div class=\"remark-highlight\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">enum</span> <span class=\"token constant\">OKX_CONNECT_ERROR_CODES</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token constant\">UNKNOWN_ERROR</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    <span class=\"token constant\">ALREADY_CONNECTED_ERROR</span> <span class=\"token operator\">=</span> <span class=\"token number\">11</span><span class=\"token punctuation\">,</span>\n    <span class=\"token constant\">NOT_CONNECTED_ERROR</span> <span class=\"token operator\">=</span> <span class=\"token number\">12</span><span class=\"token punctuation\">,</span>\n    <span class=\"token constant\">USER_REJECTS_ERROR</span> <span class=\"token operator\">=</span> <span class=\"token number\">300</span><span class=\"token punctuation\">,</span>\n    <span class=\"token constant\">METHOD_NOT_SUPPORTED</span> <span class=\"token operator\">=</span> <span class=\"token number\">400</span><span class=\"token punctuation\">,</span>\n    <span class=\"token constant\">CHAIN_NOT_SUPPORTED</span> <span class=\"token operator\">=</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span>\n    <span class=\"token constant\">WALLET_NOT_SUPPORTED</span> <span class=\"token operator\">=</span> <span class=\"token number\">600</span><span class=\"token punctuation\">,</span>\n    <span class=\"token constant\">CONNECTION_ERROR</span> <span class=\"token operator\">=</span> <span class=\"token number\">700</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div><!--/$--></div>",
  "url": "https://web3.okx.com/zh-hans/build/dev-docs/sdks/app-connect-evm-sdk#sdk",
  "navigation": {
    "breadcrumbs": [
      "DApp 连接钱包",
      "EVM兼容链",
      "SDK"
    ],
    "sidebar_links": [
      "什么是连接钱包",
      "支持的网络",
      "接入前提",
      "EVM 兼容链",
      "SDK",
      "UI",
      "Bitcoin 兼容链",
      "Solana 兼容链",
      "TON",
      "SUI",
      "Aptos/Movement",
      "Cosmos 系/Sei",
      "Tron",
      "Starknet",
      "常见问题",
      "接入前提",
      "EVM 兼容链",
      "Bitcoin 兼容链",
      "Tron",
      "Solana 兼容链"
    ],
    "toc": [
      "安装及初始化",
      "连接钱包",
      "判断钱包是否已连接",
      "准备交易",
      "使用RPC",
      "设置默认网络",
      "断开钱包连接",
      "Event事件",
      "错误码"
    ]
  },
  "word_count": 1046,
  "extract_time": "2025-05-27 06:58:26"
}